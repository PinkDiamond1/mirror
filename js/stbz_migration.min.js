var detectMetamask=!1,metamaskConnected=!1,userAddress="",refreshTimer=null,targetNetwork=42161,stbzAddress="0x2C110867CA90e43D372C1C2E92990B00EA32818b",merkleAddress="0x56d8d79d0342E56e0a87E6932d7833a992A3b91F",contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_totalsupply="18160ddd",contract_balanceof="70a08231",contract_isclaimed="9e34070f",contract_merkleclaim="2e7ba6ef",airdropInfo={};function checkMetaMaskExist(){void 0!==window.ethereum&&(detectMetamask=!0,null==getCookie("metamask")?$("#metamask_interactive").html("Connect Wallet"):0==metamaskConnected&&enableMetaMask())}async function enableMetaMask(){const e=await ethereum.request({method:"eth_requestAccounts"});if(e){var t=await ethereum.request({method:"eth_chainId"});if(0!=(t=new BigNumber("0x"+t.substring(2))).comparedTo(targetNetwork))return 0==t.comparedTo(56)?void window.location.replace("../../"):0==t.comparedTo(1)?(userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),$("#connection_text").html('Switch network from Ethereum network to <a href="https://developer.offchainlabs.com/docs/mainnet#connect-your-wallet" target="_blank">Arbitrum One</a> network'),void ethereum.on("chainChanged",function(e){location.reload()})):void alert("This application requires the Arbitrum One network, please switch it in your MetaMask UI.");userAddress=e[0],metamaskConnected=!0,setCookie("metamask","active",0),$("#loading_panel").hide(),$("#data_panel").show(),checkMerkleAirdrop(),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(e){userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(e){location.reload()})}}function metamaskButtonClick(){if(0==detectMetamask)window.open("https://metamask.io/","_blank");else 1==detectMetamask&&0==metamaskConnected&&enableMetaMask()}function checkMerkleAirdrop(){$.getJSON("processed_arb_stbz_merkle_info.json",function(e){$.each(e.claims,function(t,r){e.claims[t.toLowerCase()]||(e.claims[t.toLowerCase()]=r,delete e.claims[t])});var t=userAddress.toLowerCase();if(!e.claims[t])return $("#my_claimable").html("0 STBZ"),void $("#my_locked").html("0 ETH-STBZ");var r=new BigNumber(e.claims[t].index).toString(16);r=padleftzero(r,64);const o=[{to:merkleAddress,data:"0x"+contract_isclaimed+r},"latest"];ethereum.request({method:"eth_call",params:o}).then(r=>{var o=r.substring(2);0==new BigNumber("0x"+o.substring(0,64)).comparedTo(0)?(airdropInfo.index=e.claims[t].index,airdropInfo.amount=new BigNumber("0x"+e.claims[t].amount),airdropInfo.proof=e.claims[t].proof,$("#my_locked").html(airdropInfo.amount.times(3).div(new BigNumber(10).pow(18)).dp(4).toString(10)+" ETH-STBZ"),$("#my_claimable").html(airdropInfo.amount.div(new BigNumber(10).pow(18)).dp(4).toString(10)+" STBZ"),$("#airdrop_action_div").css("display","block")):($("#my_claimable").html("0 STBZ"),$("#my_locked").html("0 ETH-STBZ"))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})})}function getArbSTBZAirdrop(){if(!airdropInfo)return;var e=airdropInfo.index.toString(16);e=padleftzero(e,64);var t=padleftzero(userAddress.substring(2),64),r=airdropInfo.amount.toString(16);r=padleftzero(r,64);var o=new BigNumber(128).toString(16);o=padleftzero(o,64);var n=new BigNumber(airdropInfo.proof.length).toString(16);n=padleftzero(n,64);for(var a="",i=0;i<airdropInfo.proof.length;i++)a+=padrightzero(airdropInfo.proof[i].substring(2),64);sendETHTransaction([{to:merkleAddress,from:userAddress,data:"0x"+contract_merkleclaim+e+t+r+o+n+a}],function(){$("#airdrop_action_div").css("display","none"),$("#my_claimable").html("0 STBZ"),$("#my_locked").html("0 ETH-STBZ")})}function padleftzero(e,t){return(e=e.toString()).length<t?padleftzero("0"+e,t):e}function padrightzero(e,t){return(e=e.toString()).length<t?padrightzero(e+"0",t):e}function runCountDownTimer(){var e=Math.floor((new Date).getTime()/1e3);if(1633608e3>e){var t=1633608e3-e,r=Math.floor(t/3600),o=Math.floor(t%3600/60),n=Math.floor(t%60),a="HRS",i="MINS",s="SECS";1==r&&(a="HR"),1==o&&(i="MIN"),1==n&&(s="SEC");var c=r+" "+a+", ",d=o+" "+i+", ",l=n+" "+s;r<1&&(c="",o<1&&(d="")),$("#countdown_timer").html(c+d+l+"<br>"),window.setTimeout(runCountDownTimer,1e3)}else"none"!=$("#migration_box").css("display")&&($("#countdown_timer").html("FINISHED<br>PLEASE WAIT FOR ARBITRUM LAUNCH<br>"),$("#migration_box").hide())}async function updateUI(){null!=refreshTimer&&clearTimeout(refreshTimer),refreshTimer=window.setTimeout(updateUI,6e4);var e=[{to:migrateAddress,data:"0x"+contract_view_total},"latest"];await ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2),r=new BigNumber("0x"+t.substring(0,64));r=r.div(new BigNumber(10).pow(18)),$("#total_locked").html(r.dp(3).toString(10)+" STBZ")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))});var t=padleftzero(userAddress.substring(2),64);e=[{to:migrateAddress,data:"0x"+contract_user_balance+t},"latest"],await ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2),r=new BigNumber("0x"+t.substring(0,64));r=r.div(new BigNumber(10).pow(18)),$("#my_locked").html(r.dp(3).toString(10)+" STBZ"),r=r.div(3),$("#my_claimable").html(r.dp(3).toString(10)+" ARB-STBZ")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),checkAllowance()}function checkAllowance(){var e=padleftzero(userAddress.substring(2),64),t=padleftzero(migrateAddress.substring(2),64);if("none"==$("#stbz_action_button").css("display")&&"none"==$("#stbz_unlock_button").css("display")||1==$("#stbz_unlock_inner_button").prop("disabled")){const r=[{to:stbzAddress,data:"0x"+contract_viewallowance+e+t},"latest"];ethereum.request({method:"eth_call",params:r}).then(e=>{var t=e.substring(2);new BigNumber("0x"+t.substring(0,64)).comparedTo(1)<0?$("#stbz_unlock_button").show():($("#stbz_unlock_button").hide(),$("#stbz_action_button").show())}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}}function unlockSTBZ(){var e=new BigNumber(2).pow(256).minus(1),t=migrateAddress.substring(2);t=padleftzero(t.toLowerCase(),64);var r=e.toString(16);r=padleftzero(r,64),sendETHTransaction([{to:stbzAddress,gas:"0x186A0",from:userAddress,data:"0x"+contract_approve+t+r}],function(){$("#stbz_unlock_inner_button").prop("disabled",!0),$("#stbz_unlock_inner_button").html("UNLOCKING...")})}function selectMaxSTBZ(){var e=padleftzero(userAddress.substring(2),64);const t=[{to:stbzAddress,data:"0x"+contract_balanceof+e},"latest"];ethereum.request({method:"eth_call",params:t}).then(e=>{var t=e.substring(2),r=new BigNumber("0x"+t.substring(0,64));r=r.div(new BigNumber(10).pow(18)),$("#stbz_migrate_amount").val(r.toString(10))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function lockSTBZ(){var e=new BigNumber($("#stbz_migrate_amount").val());if(e.isNaN())return;if(e.comparedTo(0)<=0)return;var t=(e=e.times(new BigNumber(10).pow(18))).toString(16);t=padleftzero(t,64);var r="0x"+contract_lock+t;sendETHTransaction([{to:migrateAddress,from:userAddress,data:r}],null)}async function sendETHTransaction(e,t){var r=await ethereum.request({method:"eth_chainId"});0==(r=new BigNumber("0x"+r.substring(2))).comparedTo(targetNetwork)?ethereum.request({method:"eth_sendTransaction",params:e}).then(e=>{console.log("Transaction hash: "+e),t&&t()}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}):alert("This application requires the Arbitrum One network, please switch it in your MetaMask UI.")}function setCookie(e,t,r){var o="";if(r>0){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3),o="; expires="+n.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/; SameSite=Strict"}function getCookie(e){for(var t=e+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var n=r[o];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}function eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}$(window).on("load",function(){checkMetaMaskExist()});