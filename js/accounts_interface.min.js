var detectMetamask=!1,metamaskConnected=!1,userAddress="",eth_price=new BigNumber(0),gas_price_eth=new BigNumber(0),withdraw_note="",global_objects={},deposit_gas_units=new BigNumber(12e5),withdraw_gas_units=new BigNumber(5e5),proxyAddress="0xcA4530692F73110e5E15E2D07049bcFd5Adbe0de",apiURL="../../api/requests/",contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_depositDAI="8c678254",contract_depositUSDC="7c34c355",contract_depositUSDT="9bb0b783",contract_depositYUSD="34407707",contract_depositLINK="f34ee3ea",contract_depositWBTC="12a86993",contract_depositRenBTC="bf138997",contract_depositCRVBTC="dd028d24",contract_withdrawDAI="7bd0d2af",contract_withdrawUSDC="2db80eb1",contract_withdrawUSDT="4fdc0c90",contract_withdrawYUSD="7708fd95",contract_withdrawLINK="315e573d",contract_withdrawWBTC="9b043c4c",contract_withdrawRenBTC="8dbe5d4f",contract_withdrawCRVBTC="7e87c48e",contract_getPoolsTotal="10237955",contract_getPoolsDetail="131da313",targetNetwork=1;function updateDepositView(){for(var t=$("#deposit_account").children("option:selected").val(),e=-1,o=0;o<tokenList.length;o++)if(tokenList[o].units.toLowerCase()==t.toLowerCase()){e=o;break}-1!=e&&($("#deposit_action_buttons").hide(),$("#unlock_button").hide(),$("#note").html(""),$("#note_field").hide(),$("#deposit_gen_tran_button").html("GENERATE NOTE >"),$("#deposit_options").show(),$("#unlock_inner_button").html("UNLOCK "+tokenList[e].units+" TO DEPOSIT >"),"renbtc"==t||"wbtc"==t||"crvbtc"==t?($("#total_pools_header").html("ALL POOLS"),$("#pool_1_num_header").html("0.01 POOL"),$("#pool_2_num_header").html("0.1 POOL"),$("#pool_3_num_header").html("1 POOL"),$("#pool_1_last_header").html("0.01 POOL"),$("#pool_2_last_header").html("0.1 POOL"),$("#pool_3_last_header").html("1 POOL"),$("#pool_3_num_div").show(),$("#pool_3_last_div").show(),$("#deposit_1_input").val("0.01"),$("#deposit_2_input").val("0.1"),$("#deposit_3_input").val("1"),$("#deposit_3_div").show(),$("#deposit_1_unit").html("0.01 "+tokenList[e].units+"<br>"),$("#deposit_2_unit").html("0.1 "+tokenList[e].units+"<br>"),$("#deposit_3_unit").html("1 "+tokenList[e].units)):($("#total_pools_header").html("BOTH POOLS"),$("#pool_3_num_div").hide(),$("#pool_3_last_div").hide(),$("#deposit_3_div").hide(),"link"==t?($("#pool_1_num_header").html("10 POOL"),$("#pool_2_num_header").html("100 POOL"),$("#pool_1_last_header").html("10 POOL"),$("#pool_2_last_header").html("100 POOL"),$("#deposit_1_input").val("10"),$("#deposit_2_input").val("100"),$("#deposit_1_unit").html("10 "+tokenList[e].units),$("#deposit_2_unit").html("100 "+tokenList[e].units)):($("#pool_1_num_header").html("100 POOL"),$("#pool_2_num_header").html("1000 POOL"),$("#pool_1_last_header").html("100 POOL"),$("#pool_2_last_header").html("1000 POOL"),$("#deposit_1_input").val("100"),$("#deposit_2_input").val("1000"),$("#deposit_1_unit").html("100 "+tokenList[e].units),$("#deposit_2_unit").html("1000 "+tokenList[e].units))),$("#deposit_1_input").prop("checked",!0),matchColumnLength())}$(window).on("load",function(){checkMetaMaskExist(),loadTokenList(),updateDepositView(),$("#accounts_header").html("Connect to MetaMask to view the accounts"),$("#deposit_account").change(function(){updateDepositView(),checkAllowance(),checkPoolInfo()})});var tokenList=[];function loadTokenList(){tokenList.push({token:"0x6B175474E89094C44Da98b954EedeAC495271d0F",units:"DAI",decimals:18,stable:!0}),tokenList.push({token:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",units:"USDC",decimals:6,stable:!0}),tokenList.push({token:"0xdAC17F958D2ee523a2206206994597C13D831ec7",units:"USDT",decimals:6,stable:!0}),tokenList.push({token:"0x5dbcF33D8c2E976c6b560249878e6F1491Bca25c",units:"yUSD",decimals:18,stable:!1}),tokenList.push({token:"0x514910771AF9Ca656af840dff83E8264EcF986CA",units:"LINK",decimals:18,stable:!1}),tokenList.push({token:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",units:"wBTC",decimals:8}),tokenList.push({token:"0xEB4C2781e4ebA804CE9a9803C67d0893436bB27D",units:"renBTC",decimals:8}),tokenList.push({token:"0x49849C98ae39Fff122806C06791Fa73784FB3675",units:"CRVBTC",decimals:18})}function checkMetaMaskExist(){void 0!==window.ethereum&&(1==ethereum.isMetaMask&&(detectMetamask=!0,null==getCookie("metamask")?$("#metamask_interactive").html("Connect MetaMask"):0==metamaskConnected&&enableMetaMask()))}async function enableMetaMask(){const t=await ethereum.request({method:"eth_requestAccounts"});if(t){if(ethereum.chainId||(ethereum.chainId="0x1"),0!=new BigNumber("0x"+ethereum.chainId.substring(2)).comparedTo(targetNetwork))return void alert("This application requires the main network, please switch it in your MetaMask UI.");userAddress=t[0],metamaskConnected=!0,setCookie("metamask","active",0),window.location.href.indexOf("mirror")>-1&&(apiURL="https://www.stabilize.finance/api/requests/"),$("#loading_panel").hide(),$("#data_panel").show(),matchColumnLength(),refreshAccountData(),loadWithdrawRequests(0),null==global_objects.web3_instance&&global_objects.initWeb3(!0,!1),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(t){userAddress=t[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(t){location.reload()})}}function metamaskButtonClick(){if(0==detectMetamask)window.open("https://metamask.io/","_blank");else 1==detectMetamask&&0==metamaskConnected&&enableMetaMask()}function padleftzero(t,e){return(t=t.toString()).length<e?padleftzero("0"+t,e):t}function padrightzero(t,e){return(t=t.toString()).length<e?padrightzero(t+"0",e):t}function matchColumnLength(){if("0px"!=$("#request_column").css("borderLeftWidth")){var t=parseFloat($("#request_column").css("height")),e=parseFloat($("#teller_column").css("height"));t<e&&$("#request_column").css("min-height",e)}}function getEthereumGasPrice(){$.get("https://www.etherchain.org/api/gasPriceOracle",function(t){t&&(gas_price_eth=new BigNumber(t.standard).div(1e9))})}function getEtherPrice(){$.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd",function(t){t&&(eth_price=new BigNumber(t.ethereum.usd))})}function getCoinPriceWithdraw(t,e){var o="dai";"usdc"==t?o="usd-coin":"usdt"==t?o="tether":"yusd"==t?o="yvault-lp-ycurve":"link"==t?o="chainlink":"wbtc"==t?o="wrapped-bitcoin":"renbtc"==t?o="renbtc":"crvbtc"==t&&(o="lp-renbtc-curve");var i="https://api.coingecko.com/api/v3/simple/price?ids="+o+"&vs_currencies=usd";$.get(i,function(i){i&&(price=new BigNumber(i[o].usd),calculateWithdrawFee(price,e,t))})}function calculateWithdrawFee(t,e,o){for(var i=new BigNumber(e),r=new BigNumber(0),n=-1,s=0;s<tokenList.length;s++)if(tokenList[s].units.toLowerCase()==o){n=s;break}if(-1!=n){if(1==tokenList[n].stable){var a=new BigNumber(.01),d=new BigNumber(.001),c=new BigNumber(1.02),u=new BigNumber(.98);if(t.comparedTo(u)<=0)r=a;else if(t.comparedTo(c)>=0)r=d;else{var l=a.minus(d).div(c.minus(u)),h=t.minus(u).times(l);r=new BigNumber(a).minus(h)}i=(i=i.times(r)).plus(10),i=new BigNumber(i.integerValue(BigNumber.ROUND_CEIL)),$("#withdraw_fee").html(i.dp(0).toString(10))}else{var _=new BigNumber(.01);i=(i=i.times(_)).plus(new BigNumber(10).div(t)),$("#withdraw_fee").html(i.dp(5).toString(10))}$("#token_price").val(t.dp(8).toString(10))}}function performDepositAction(){if("none"==$("#note_field").css("display")){if(null==global_objects.web3_instance)return void alert("Security modules not loaded yet");var t=$("#deposit_account").children("option:selected").val().toLowerCase(),e=new BigNumber($("input[name=deposit_number]:checked","#deposit_options").val()),o=global_objects.generateDepositNote(t,e,targetNetwork);$("#note").html(o),$("#deposit_options").hide(),$("#note_field").show(),$("#deposit_gen_tran_button").html("DEPOSIT >"),matchColumnLength()}else{o=$("#note").text(),e=new BigNumber($("input[name=deposit_number]:checked","#deposit_options").val()),t=$("#deposit_account").children("option:selected").val().toLowerCase();for(var i=-1,r=0;r<tokenList.length;r++)if(tokenList[r].units.toLowerCase()==t){i=r;break}if(-1==i)return;e=e.times(new BigNumber(10).pow(tokenList[i].decimals));var n=contract_depositDAI;"usdc"==t?n=contract_depositUSDC:"usdt"==t?n=contract_depositUSDT:"yusd"==t?n=contract_depositYUSD:"link"==t?n=contract_depositLINK:"wbtc"==t?n=contract_depositWBTC:"renbtc"==t?n=contract_depositRenBTC:"crvbtc"==t&&(n=contract_depositCRVBTC);var s=global_objects.createDepositCommitment(o).substring(2);s=padrightzero(s,64);var a=e.toString(16);a=padleftzero(a,64),sendETHTransaction([{to:proxyAddress,from:userAddress,data:"0x"+n+s+a}],function(){$("#note").html(""),$("#note_field").hide(),$("#deposit_gen_tran_button").html("GENERATE NOTE >"),$("#deposit_options").show()})}}function executeWithdraw(t){if(null==global_objects.web3_instance)return void alert("Security modules not loaded yet");var e=$("#request_"+t+"_proof").val(),o=$("#request_"+t+"_root").val(),i=$("#request_"+t+"_recipient").val(),r=proxyAddress,n=new BigNumber($("#request_"+t+"_ethfee").val()),s=new BigNumber($("#request_"+t+"_reward").val()),a=$("#request_"+t+"_currency").val().toLowerCase(),d=new BigNumber($("#request_"+t+"_amount").val());n=n.times(new BigNumber(10).pow(18));for(var c=-1,u=0;u<tokenList.length;u++)if(tokenList[u].units.toLowerCase()==a){c=u;break}if(-1==c)return;s=s.times(new BigNumber(10).pow(tokenList[c].decimals)),d=d.times(new BigNumber(10).pow(tokenList[c].decimals));var l=global_objects.web3_instance.eth.abi.encodeParameters(["bytes","uint256","bytes32","bytes32","address","address","uint256","uint256"],[e,d.toString(10),o,t,i,r,s.toString(10),n.toString(10)]);l=l.substring(2);var h=contract_withdrawDAI;"usdc"==a?h=contract_withdrawUSDC:"usdt"==a?h=contract_withdrawUSDT:"yusd"==a?h=contract_withdrawYUSD:"link"==a?h=contract_withdrawLINK:"wbtc"==a?h=contract_withdrawWBTC:"renbtc"==a?h=contract_withdrawRenBTC:"crvbtc"==a&&(h=contract_withdrawCRVBTC),sendETHTransaction([{to:proxyAddress,value:n.toString(16),from:userAddress,data:"0x"+h+l}],function(){removeWithdrawRequest(t)})}function removeWithdrawRequest(t){$("#request_"+t).remove()}async function processNote(){if(null!=global_objects.web3_instance){if(!((withdraw_note=$("#deposit_note_withdraw").val().trim()).length<5))try{$("#start_button").html("LOADING KEYS..."),$("#start_button").prop("disabled",!0);try{await global_objects.initWeb3(!1,!0)}catch(t){alert("Failed to load security module's keys"),console.log("Security module error: "+t)}for(var{currency:t,amount:e,netId:o,deposit:i}=global_objects.parseNote(withdraw_note),r=-1,n=0;n<tokenList.length;n++)if(tokenList[n].units.toLowerCase()==t.toLowerCase()){r=n;break}if(-1==r)return;$("#withdraw_account").html(tokenList[n].units),$("#tip_coin").html(tokenList[n].units),$("#withdraw_amount").html(e),$("#withdraw_fee").html(""),getCoinPriceWithdraw(t.toLowerCase(),e),$("#deposit_note_withdraw").val(""),$("#start_withdraw_div").hide(),$("#finish_withdraw_div").show(),matchColumnLength()}catch{alert("Failed to parse deposit note"),resetWithdrawWindow()}}else alert("Security modules not loaded yet")}async function postProof(){var t=$("#withdraw_address").val().trim();if(42==t.length)if(0!=$("#withdraw_fee").text().length){var e=new BigNumber($("#withdraw_eth").val()),o=new BigNumber($("#withdraw_tip").val());if((o=o.plus($("#withdraw_fee").text())).times($("#token_price").val()).comparedTo(e.times(eth_price))<0)alert("Your tip amount is not high enough to cover your ETH requested");else if(o.comparedTo(new BigNumber($("#withdraw_amount").text()))>=0)alert("Your tip amount cannot be greater than or equal to the amount withdrawn");else{var i=withdraw_gas_units.times(gas_price_eth).times(eth_price),r=o.times($("#token_price").val()).minus(10).div(2).plus(10);if(i.comparedTo(r)>0)if(0==confirm("This request is not economic for the withdrawer due to gas cost, it may never be fulfilled. Consider giving more tips. Do you want to continue?"))return;$("#withdraw_button").html("REQUESTING WITHDRAW..."),$("#withdraw_button").css("disabled",!0),$("#withdraw_code").html("<br>This may take a few minutes as a zkSnark proof needs to be generated.<br>"),$("#withdraw_code").show();try{const{proof:i,args:r}=await global_objects.generateWithdrawalProof(withdraw_note,t,proxyAddress,o.dp(5).toString(10),e.dp(18).toString(10));if(void 0===i)throw"Unable to generate proof";for(var n=$("#withdraw_account").text().toLowerCase(),s=-1,a=0;a<tokenList.length;a++)if(tokenList[a].units.toLowerCase()==n){s=a;break}if(-1==s)return;var d=new BigNumber($("#withdraw_amount").text());d=d.times(new BigNumber(10).pow(tokenList[s].decimals));var c=o.dp(5).times(new BigNumber(10).pow(tokenList[s].decimals)),u=e.times(new BigNumber(10).pow(18)),l=global_objects.web3_instance.eth.abi.encodeParameters(["bytes","uint256","bytes32","bytes32","address","address","uint256","uint256"],[i,d.dp(0).toString(10),r[0],r[1],r[2],r[3],c.dp(0).toString(10),u.dp(0).toString(10)]);$.post(apiURL,{request_type:"add_new",currency:n,abi:l,proof:i,root:r[0],nullifierHash:r[1],recipient:r[2],fee:c.toString(16),eth_refund:u.toString(16),amount:d.toString(16)},function(t){t?void 0!==t.error?($("#withdraw_code").html("<br>"+t.error+"<br>"),$("#withdraw_button").html("REQUEST WITHDRAW >"),$("#withdraw_button").css("disabled",!1)):($("#withdraw_button").html("DONE"),$("#withdraw_code").html("<br>Withdraw request posted/updated successfully<br>"),window.setTimeout(function(){loadWithdrawRequests(0),resetWithdrawWindow()},5e3)):($("#withdraw_code").html("<br>Failed to get a response from server<br>"),$("#withdraw_button").html("REQUEST WITHDRAW >"),$("#withdraw_button").css("disabled",!1))})}catch(t){alert("Failed to generate proof: "+t),resetWithdrawWindow()}}}else alert("Still waiting on fee calculation");else alert("Ethereum address is invalid")}function resetWithdrawWindow(){$("#finish_withdraw_div").hide(),$("#start_withdraw_div").show(),$("#withdraw_eth").val("0"),$("#withdraw_tip").val("0"),$("#token_price").val("0"),$("#deposit_note_withdraw").val(""),$("#withdraw_button").html("REQUEST WITHDRAW >"),$("#withdraw_code").hide(),$("#withdraw_button").css("disabled",!1),$("#start_button").html("START >"),$("#start_button").prop("disabled",!1),withdraw_note=""}function checkPoolInfo(){for(var t=$("#deposit_account").children("option:selected").val().toLowerCase(),e=-1,o=0;o<tokenList.length;o++)if(tokenList[o].units.toLowerCase()==t){e=o;break}if(-1==e)return;var i=new BigNumber(e).toString(16);i=padleftzero(i,64);const r=[{to:proxyAddress,data:"0x"+contract_getPoolsTotal+i},"latest"];ethereum.request({method:"eth_call",params:r}).then(t=>{var o=t.substring(2),r=new BigNumber("0x"+o.substring(0,64));r=r.div(new BigNumber(10).pow(tokenList[e].decimals));const n=[{to:proxyAddress,data:"0x"+contract_getPoolsDetail+i},"latest"];ethereum.request({method:"eth_call",params:n}).then(t=>{var o=t.substring(2),i=new BigNumber("0x"+o.substring(0,64)),n=new BigNumber("0x"+o.substring(64,128)),s=new BigNumber("0x"+o.substring(128,192)),a=new BigNumber("0x"+o.substring(192,256)),d=new BigNumber("0x"+o.substring(256,320)),c=new BigNumber("0x"+o.substring(320,384));$("#deposit_total").html(r.dp(4).toString(10)+" "+tokenList[e].units),$("#deposit_num_pool_1").html(i.toString(10)),$("#deposit_num_pool_2").html(n.toString(10)),"none"!=$("#pool_3_num_div").css("display")&&$("#deposit_num_pool_3").html(s.toString(10));var u=Math.floor((new Date).getTime()/1e3);if(a.comparedTo(0)>0){var l=u-parseInt(a.toString(10)),h=Math.floor(l/3600),_=Math.floor(l%3600/60),p="HRS";1==h&&(p="HR"),h>0?$("#deposit_time_pool_1").html(h+" "+p+", "+_+" MINS AGO"):$("#deposit_time_pool_1").html(_+" MINS AGO")}else $("#deposit_time_pool_1").html("NO DEPOSITS");if(d.comparedTo(0)>0){l=u-parseInt(d.toString(10)),h=Math.floor(l/3600),_=Math.floor(l%3600/60),p="HRS";1==h&&(p="HR"),h>0?$("#deposit_time_pool_2").html(h+" "+p+", "+_+" MINS AGO"):$("#deposit_time_pool_2").html(_+" MINS AGO")}else $("#deposit_time_pool_2").html("NO DEPOSITS");if("none"!=$("#pool_3_last_div").css("display"))if(c.comparedTo(0)>0){l=u-parseInt(c.toString(10)),h=Math.floor(l/3600),_=Math.floor(l%3600/60),p="HRS";1==h&&(p="HR"),h>0?$("#deposit_time_pool_3").html(h+" "+p+", "+_+" MINS AGO"):$("#deposit_time_pool_3").html(_+" MINS AGO")}else $("#deposit_time_pool_3").html("NO DEPOSITS")}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}function checkAllowance(){for(var t=-1,e=$("#deposit_account").children("option:selected").val(),o=0;o<tokenList.length;o++)if(tokenList[o].units.toLowerCase()==e.toLowerCase()){t=o;break}if(-1!=t){var i=tokenList[t].token,r=padleftzero(userAddress.substring(2),64),n=padleftzero(proxyAddress.substring(2),64);if("none"==$("#deposit_action_buttons").css("display")&&"none"==$("#unlock_button").css("display")||1==$("#unlock_inner_button").prop("disabled")){const t=[{to:i,data:"0x"+contract_viewallowance+r+n},"latest"];ethereum.request({method:"eth_call",params:t}).then(t=>{var e=t.substring(2);new BigNumber("0x"+e.substring(0,64)).comparedTo(1)<0?$("#unlock_button").show():($("#unlock_button").hide(),$("#deposit_action_buttons").show(),matchColumnLength())}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}}}function addWithdrawRequestBox(t,e,o,i,r,n,s,a){var d=t,c='<div class="withdraw_request_box" id="request_'+d+'" onclick=\'executeWithdraw("'+d+"\");'>";c+='<div class="withdraw_request_inner_left">&#x25A0;</div>',c+=r>0?'<div class="withdraw_request_inner_right" style="min-width: 150px;"><strong>YOUR COST:</strong><br>'+r+" ETH<br>GAS FEE</div>":'<div class="withdraw_request_inner_right" style="min-width: 150px;"><strong>YOUR COST:</strong><br>GAS FEE</div>';var u=new BigNumber(n);c+='<div class="withdraw_request_inner_right"><strong>YOUR REWARD:</strong><br>'+(u="dai"==s||"usdc"==s||"usdt"==s?new BigNumber(10).plus(u.minus(10).div(2)):u.div(2)).dp(18).toString(10)+" "+s.toUpperCase()+"</div>",c+='<input type="hidden" id="request_'+d+'_proof" value="'+e+'">',c+='<input type="hidden" id="request_'+d+'_root" value="'+o+'">',c+='<input type="hidden" id="request_'+d+'_recipient" value="'+i+'">',c+='<input type="hidden" id="request_'+d+'_ethfee" value="'+r+'">',c+='<input type="hidden" id="request_'+d+'_reward" value="'+n+'">',c+='<input type="hidden" id="request_'+d+'_currency" value="'+s+'">',c+='<input type="hidden" id="request_'+d+'_amount" value="'+a+'">',c+="</div>",$("#request_container").append(c)}function loadWithdrawRequests(t){$("#request_next_page").length&&$("#request_next_page").remove(),$(".withdraw_request_box").length>0&&$(".withdraw_request_box").remove(),$.post(apiURL,{request_type:"view_requests",page:t},function(e){if(e&&void 0!==e.result){var o=e.result.length;if(0==o)0==t?$("#request_header").html("NO REQUESTS EXISTS"):($("#request_header").html("NO MORE REQUESTS"),$("#request_container").append('<span id="request_next_page" onclick="loadWithdrawRequests('+(t-1)+')" style="cursor: pointer;"><br>BACK PAGE</span>'));else{$("#request_header").html("COMPLETE THE WITHDRAW REQUESTS BELOW TO EARN THE REWARD");for(var i=0;i<o;i++){var r=e.result[i].nullifier_hash,n=e.result[i].currency,s=e.result[i].proof,a=e.result[i].root,d=e.result[i].recipient,c=new BigNumber(e.result[i].amount),u=new BigNumber(e.result[i].eth_fee),l=new BigNumber(e.result[i].reward);addWithdrawRequestBox(r,s,a,d,u.dp(18).toString(10),l.dp(18).toString(10),n,c.dp(18).toString(10))}o>=10&&$("#request_container").append('<span id="request_next_page" onclick="loadWithdrawRequests('+(t+1)+')" style="cursor: pointer;"><br>NEXT PAGE</span>')}}})}function refreshAccountData(){window.setTimeout(refreshAccountData,6e4),checkAllowance(),checkPoolInfo(),getEtherPrice(),getEthereumGasPrice()}function unlockAccount(){for(var t=0,e=$("#deposit_account").children("option:selected").val(),o=0;o<tokenList.length;o++)if(tokenList[o].units.toLowerCase()==e.toLowerCase()){t=o;break}var i=new BigNumber(2).pow(256).minus(1),r=proxyAddress.substring(2);r=padleftzero(r,64);var n=i.toString(16);n=padleftzero(n,64),sendETHTransaction([{to:tokenList[t].token,gas:"0x186A0",from:userAddress,data:"0x"+contract_approve+r+n}],function(){$("#unlock_inner_button").prop("disabled",!0),$("#unlock_inner_button").html("UNLOCKING "+tokenList[t].units+" TO DEPOSIT")})}function sendETHTransaction(t,e){0==new BigNumber("0x"+ethereum.chainId.substring(2)).comparedTo(targetNetwork)?ethereum.request({method:"eth_sendTransaction",params:t}).then(t=>{console.log("Transaction hash: "+t),e&&e()}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))}):alert("This application requires the main network, please switch it in your MetaMask UI.")}function setCookie(t,e,o){var i="";if(o>0){var r=new Date;r.setTime(r.getTime()+24*o*60*60*1e3),i="; expires="+r.toUTCString()}document.cookie=t+"="+(e||"")+i+"; path=/; SameSite=Strict"}function getCookie(t){for(var e=t+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var r=o[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}function eraseCookie(t){document.cookie=t+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}