var detectMetamask=!1,metamaskConnected=!1,userAddress="",eth_price=new BigNumber(0),gas_price_eth=new BigNumber(0),withdraw_note="",global_objects={},deposit_gas_units=new BigNumber(12e5),withdraw_gas_units=new BigNumber(5e5),proxyAddress="0xcA4530692F73110e5E15E2D07049bcFd5Adbe0de",apiURL="../../api/requests/",contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_depositDAI="8c678254",contract_depositUSDC="7c34c355",contract_depositUSDT="9bb0b783",contract_depositYUSD="34407707",contract_depositLINK="f34ee3ea",contract_depositWBTC="12a86993",contract_depositRenBTC="bf138997",contract_depositCRVBTC="dd028d24",contract_withdrawDAI="7bd0d2af",contract_withdrawUSDC="2db80eb1",contract_withdrawUSDT="4fdc0c90",contract_withdrawYUSD="7708fd95",contract_withdrawLINK="315e573d",contract_withdrawWBTC="9b043c4c",contract_withdrawRenBTC="8dbe5d4f",contract_withdrawCRVBTC="7e87c48e",contract_getPoolsTotal="10237955",contract_getPoolsDetail="131da313",targetNetwork=1;function updateDepositView(){for(var e=$("#deposit_account").children("option:selected").val(),t=-1,o=0;o<tokenList.length;o++)if(tokenList[o].units.toLowerCase()==e.toLowerCase()){t=o;break}-1!=t&&($("#deposit_action_buttons").hide(),$("#unlock_button").hide(),$("#note").html(""),$("#note_field").hide(),$("#deposit_gen_tran_button").html("GENERATE NOTE >"),$("#deposit_options").show(),$("#unlock_inner_button").html("UNLOCK "+tokenList[t].units+" TO DEPOSIT >"),"renbtc"==e||"wbtc"==e||"crvbtc"==e?($("#total_pools_header").html("ALL POOLS"),$("#pool_1_num_header").html("0.01 POOL"),$("#pool_2_num_header").html("0.1 POOL"),$("#pool_3_num_header").html("1 POOL"),$("#pool_1_last_header").html("0.01 POOL"),$("#pool_2_last_header").html("0.1 POOL"),$("#pool_3_last_header").html("1 POOL"),$("#pool_3_num_div").show(),$("#pool_3_last_div").show(),$("#deposit_1_input").val("0.01"),$("#deposit_2_input").val("0.1"),$("#deposit_3_input").val("1"),$("#deposit_3_div").show(),$("#deposit_1_unit").html("0.01 "+tokenList[t].units+"<br>"),$("#deposit_2_unit").html("0.1 "+tokenList[t].units+"<br>"),$("#deposit_3_unit").html("1 "+tokenList[t].units)):($("#total_pools_header").html("BOTH POOLS"),$("#pool_3_num_div").hide(),$("#pool_3_last_div").hide(),$("#deposit_3_div").hide(),"link"==e?($("#pool_1_num_header").html("10 POOL"),$("#pool_2_num_header").html("100 POOL"),$("#pool_1_last_header").html("10 POOL"),$("#pool_2_last_header").html("100 POOL"),$("#deposit_1_input").val("10"),$("#deposit_2_input").val("100"),$("#deposit_1_unit").html("10 "+tokenList[t].units),$("#deposit_2_unit").html("100 "+tokenList[t].units)):($("#pool_1_num_header").html("100 POOL"),$("#pool_2_num_header").html("1000 POOL"),$("#pool_1_last_header").html("100 POOL"),$("#pool_2_last_header").html("1000 POOL"),$("#deposit_1_input").val("100"),$("#deposit_2_input").val("1000"),$("#deposit_1_unit").html("100 "+tokenList[t].units),$("#deposit_2_unit").html("1000 "+tokenList[t].units))),$("#deposit_1_input").prop("checked",!0),matchColumnLength())}$(window).on("load",function(){checkMetaMaskExist(),loadTokenList(),updateDepositView(),$("#accounts_header").html("Connect to MetaMask to view the accounts"),$("#deposit_account").change(function(){updateDepositView(),checkAllowance(),checkPoolInfo()})});var tokenList=[];function loadTokenList(){tokenList.push({token:"0x6B175474E89094C44Da98b954EedeAC495271d0F",units:"DAI",decimals:18,stable:!0}),tokenList.push({token:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",units:"USDC",decimals:6,stable:!0}),tokenList.push({token:"0xdAC17F958D2ee523a2206206994597C13D831ec7",units:"USDT",decimals:6,stable:!0}),tokenList.push({token:"0x5dbcF33D8c2E976c6b560249878e6F1491Bca25c",units:"yUSD",decimals:18,stable:!1}),tokenList.push({token:"0x514910771AF9Ca656af840dff83E8264EcF986CA",units:"LINK",decimals:18,stable:!1}),tokenList.push({token:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",units:"wBTC",decimals:8}),tokenList.push({token:"0xEB4C2781e4ebA804CE9a9803C67d0893436bB27D",units:"renBTC",decimals:8}),tokenList.push({token:"0x49849C98ae39Fff122806C06791Fa73784FB3675",units:"CRVBTC",decimals:18})}function checkMetaMaskExist(){void 0!==window.ethereum&&(1==ethereum.isMetaMask&&(detectMetamask=!0,null==getCookie("metamask")?$("#metamask_interactive").html("Connect MetaMask"):0==metamaskConnected&&enableMetaMask()))}async function enableMetaMask(){const e=await ethereum.request({method:"eth_requestAccounts"});if(e){if(ethereum.chainId||(ethereum.chainId="0x1"),0!=new BigNumber("0x"+ethereum.chainId.substring(2)).comparedTo(targetNetwork))return void alert("This application requires the main network, please switch it in your MetaMask UI.");userAddress=e[0],metamaskConnected=!0,setCookie("metamask","active",0),window.location.href.indexOf("mirror")>-1&&(apiURL="https://www.stabilize.finance/api/requests/"),$("#loading_panel").hide(),$("#data_panel").show(),matchColumnLength(),refreshAccountData(),loadWithdrawRequests(0),null==global_objects.web3_instance&&global_objects.initWeb3(),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(e){userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(e){location.reload()})}}function metamaskButtonClick(){if(0==detectMetamask)window.open("https://metamask.io/","_blank");else 1==detectMetamask&&0==metamaskConnected&&enableMetaMask()}function padleftzero(e,t){return(e=e.toString()).length<t?padleftzero("0"+e,t):e}function padrightzero(e,t){return(e=e.toString()).length<t?padrightzero(e+"0",t):e}function matchColumnLength(){if("0px"!=$("#request_column").css("borderLeftWidth")){var e=parseFloat($("#request_column").css("height")),t=parseFloat($("#teller_column").css("height"));e<t&&$("#request_column").css("min-height",t)}}function getEthereumGasPrice(){$.get("https://www.etherchain.org/api/gasPriceOracle",function(e){e&&(gas_price_eth=new BigNumber(e.standard).div(1e9))})}function getEtherPrice(){$.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd",function(e){e&&(eth_price=new BigNumber(e.ethereum.usd))})}function getCoinPriceWithdraw(e,t){var o="dai";"usdc"==e?o="usd-coin":"usdt"==e?o="tether":"yusd"==e?o="yusd":"link"==e?o="chainlink":"wbtc"==e?o="wrapped-bitcoin":"renbtc"==e?o="renbtc":"crvbtc"==e&&(o="lp-renbtc-curve");var i="https://api.coingecko.com/api/v3/simple/price?ids="+o+"&vs_currencies=usd";$.get(i,function(i){i&&(price=new BigNumber(i[o].usd),calculateWithdrawFee(price,t,e))})}function calculateWithdrawFee(e,t,o){for(var i=new BigNumber(t),n=new BigNumber(0),r=-1,s=0;s<tokenList.length;s++)if(tokenList[s].units.toLowerCase()==o){r=s;break}if(-1!=r){if(1==tokenList[r].stable){var a=new BigNumber(.01),d=new BigNumber(.001),c=new BigNumber(1.02),u=new BigNumber(.98);if(e.comparedTo(u)<=0)n=a;else if(e.comparedTo(c)>=0)n=d;else{var l=a.minus(d).div(c.minus(u)),h=e.minus(u).times(l);n=new BigNumber(a).minus(h)}i=(i=i.times(n)).plus(10),i=new BigNumber(i.integerValue(BigNumber.ROUND_CEIL)),$("#withdraw_fee").html(i.dp(0).toString(10))}else{var _=new BigNumber(.01);i=(i=i.times(_)).plus(new BigNumber(10).div(e)),$("#withdraw_fee").html(i.dp(5).toString(10))}$("#token_price").val(e.dp(8).toString(10))}}function performDepositAction(){if("none"==$("#note_field").css("display")){if(null==global_objects.web3_instance)return void alert("Security modules not loaded yet");var e=$("#deposit_account").children("option:selected").val().toLowerCase(),t=new BigNumber($("input[name=deposit_number]:checked","#deposit_options").val()),o=global_objects.generateDepositNote(e,t,targetNetwork);$("#note").html(o),$("#deposit_options").hide(),$("#note_field").show(),$("#deposit_gen_tran_button").html("DEPOSIT >"),matchColumnLength()}else{o=$("#note").text(),t=new BigNumber($("input[name=deposit_number]:checked","#deposit_options").val()),e=$("#deposit_account").children("option:selected").val().toLowerCase();for(var i=-1,n=0;n<tokenList.length;n++)if(tokenList[n].units.toLowerCase()==e){i=n;break}if(-1==i)return;t=t.times(new BigNumber(10).pow(tokenList[i].decimals));var r=contract_depositDAI;"usdc"==e?r=contract_depositUSDC:"usdt"==e?r=contract_depositUSDT:"yusd"==e?r=contract_depositYUSD:"link"==e?r=contract_depositLINK:"wbtc"==e?r=contract_depositWBTC:"renbtc"==e?r=contract_depositRenBTC:"crvbtc"==e&&(r=contract_depositCRVBTC);var s=global_objects.createDepositCommitment(o).substring(2);s=padrightzero(s,64);var a=t.toString(16);a=padleftzero(a,64),sendETHTransaction([{to:proxyAddress,from:userAddress,data:"0x"+r+s+a}],function(){$("#note").html(""),$("#note_field").hide(),$("#deposit_gen_tran_button").html("GENERATE NOTE >"),$("#deposit_options").show()})}}function executeWithdraw(e){if(null==global_objects.web3_instance)return void alert("Security modules not loaded yet");var t=$("#request_"+e+"_proof").val(),o=$("#request_"+e+"_root").val(),i=$("#request_"+e+"_recipient").val(),n=proxyAddress,r=new BigNumber($("#request_"+e+"_ethfee").val()),s=new BigNumber($("#request_"+e+"_reward").val()),a=$("#request_"+e+"_currency").val().toLowerCase(),d=new BigNumber($("#request_"+e+"_amount").val());r=r.times(new BigNumber(10).pow(18));for(var c=-1,u=0;u<tokenList.length;u++)if(tokenList[u].units.toLowerCase()==a){c=u;break}if(-1==c)return;s=s.times(new BigNumber(10).pow(tokenList[c].decimals)),d=d.times(new BigNumber(10).pow(tokenList[c].decimals));var l=global_objects.web3_instance.eth.abi.encodeParameters(["bytes","uint256","bytes32","bytes32","address","address","uint256","uint256"],[t,d.toString(10),o,e,i,n,s.toString(10),r.toString(10)]);l=l.substring(2);var h=contract_withdrawDAI;"usdc"==a?h=contract_withdrawUSDC:"usdt"==a?h=contract_withdrawUSDT:"yusd"==a?h=contract_withdrawYUSD:"link"==a?h=contract_withdrawLINK:"wbtc"==a?h=contract_withdrawWBTC:"renbtc"==a?h=contract_withdrawRenBTC:"crvbtc"==a&&(h=contract_withdrawCRVBTC),sendETHTransaction([{to:proxyAddress,value:r.toString(16),from:userAddress,data:"0x"+h+l}],function(){removeWithdrawRequest(e)})}function removeWithdrawRequest(e){$("#request_"+e).remove()}function processNote(){if(null!=global_objects.web3_instance){if(!((withdraw_note=$("#deposit_note_withdraw").val().trim()).length<5))try{for(var{currency:e,amount:t,netId:o,deposit:i}=global_objects.parseNote(withdraw_note),n=-1,r=0;r<tokenList.length;r++)if(tokenList[r].units.toLowerCase()==e.toLowerCase()){n=r;break}if(-1==n)return;$("#withdraw_account").html(tokenList[r].units),$("#tip_coin").html(tokenList[r].units),$("#withdraw_amount").html(t),$("#withdraw_fee").html(""),getCoinPriceWithdraw(e.toLowerCase(),t),$("#deposit_note_withdraw").val(""),$("#start_withdraw_div").hide(),$("#finish_withdraw_div").show(),matchColumnLength()}catch{alert("Failed to parse deposit note")}}else alert("Security modules not loaded yet")}async function postProof(){var e=$("#withdraw_address").val().trim();if(42==e.length){if(0!=$("#withdraw_fee").text().length){var t=new BigNumber($("#withdraw_eth").val()),o=new BigNumber($("#withdraw_tip").val());if((o=o.plus($("#withdraw_fee").text())).times($("#token_price").val()).comparedTo(t.times(eth_price))<0)alert("Your tip amount is not high enough to cover your ETH requested");else if(o.comparedTo(new BigNumber($("#withdraw_amount").text()))>=0)alert("Your tip amount cannot be greater than or equal to the amount withdrawn");else{var i=withdraw_gas_units.times(gas_price_eth).times(eth_price),n=o.times($("#token_price").val()).minus(10).div(2).plus(10);if(i.comparedTo(n)>0)if(0==confirm("This request is not economic for the withdrawer due to gas cost, it may never be fulfilled. Consider giving more tips. Do you want to continue?"))return;$("#withdraw_button").html("REQUESTING WITHDRAW..."),$("#withdraw_button").css("disabled",!0),$("#withdraw_code").html("<br>This may take a few minutes as a zkSnark proof needs to be generated.<br>"),$("#withdraw_code").show();try{const{proof:i,args:n}=await global_objects.generateWithdrawalProof(withdraw_note,e,proxyAddress,o.dp(5).toString(10),t.dp(18).toString(10));if(void 0===i)throw"Unable to generate proof";for(var r=$("#withdraw_account").text().toLowerCase(),s=-1,a=0;a<tokenList.length;a++)if(tokenList[a].units.toLowerCase()==r){s=a;break}if(-1==s)return;var d=new BigNumber($("#withdraw_amount").text());d=d.times(new BigNumber(10).pow(tokenList[s].decimals));var c=o.dp(5).times(new BigNumber(10).pow(tokenList[s].decimals)),u=t.times(new BigNumber(10).pow(18)),l=global_objects.web3_instance.eth.abi.encodeParameters(["bytes","uint256","bytes32","bytes32","address","address","uint256","uint256"],[i,d.dp(0).toString(10),n[0],n[1],n[2],n[3],c.dp(0).toString(10),u.dp(0).toString(10)]);$.post(apiURL,{request_type:"add_new",currency:r,abi:l,proof:i,root:n[0],nullifierHash:n[1],recipient:n[2],fee:c.toString(16),eth_refund:u.toString(16),amount:d.toString(16)},function(e){e?void 0!==e.error?($("#withdraw_code").html("<br>"+e.error+"<br>"),$("#withdraw_button").html("REQUEST WITHDRAW >"),$("#withdraw_button").css("disabled",!1)):($("#withdraw_button").html("DONE"),$("#withdraw_code").html("<br>Withdraw request posted/updated successfully<br>"),window.setTimeout(function(){loadWithdrawRequests(0),resetWithdrawWindow()},5e3)):($("#withdraw_code").html("<br>Failed to get a response from server<br>"),$("#withdraw_button").html("REQUEST WITHDRAW >"),$("#withdraw_button").css("disabled",!1))})}catch(e){alert("Failed to generate proof: "+e),resetWithdrawWindow()}}}}else alert("Ethereum address is invalid")}function resetWithdrawWindow(){$("#finish_withdraw_div").hide(),$("#start_withdraw_div").show(),$("#withdraw_eth").val("0"),$("#withdraw_tip").val("0"),$("#token_price").val("0"),$("#deposit_note_withdraw").val(""),$("#withdraw_button").html("REQUEST WITHDRAW >"),$("#withdraw_code").hide(),$("#withdraw_button").css("disabled",!1),withdraw_note=""}function checkPoolInfo(){for(var e=$("#deposit_account").children("option:selected").val().toLowerCase(),t=-1,o=0;o<tokenList.length;o++)if(tokenList[o].units.toLowerCase()==e){t=o;break}if(-1==t)return;var i=new BigNumber(t).toString(16);i=padleftzero(i,64);const n=[{to:proxyAddress,data:"0x"+contract_getPoolsTotal+i},"latest"];ethereum.request({method:"eth_call",params:n}).then(e=>{var o=e.substring(2),n=new BigNumber("0x"+o.substring(0,64));n=n.div(new BigNumber(10).pow(tokenList[t].decimals));const r=[{to:proxyAddress,data:"0x"+contract_getPoolsDetail+i},"latest"];ethereum.request({method:"eth_call",params:r}).then(e=>{var o=e.substring(2),i=new BigNumber("0x"+o.substring(0,64)),r=new BigNumber("0x"+o.substring(64,128)),s=new BigNumber("0x"+o.substring(128,192)),a=new BigNumber("0x"+o.substring(192,256)),d=new BigNumber("0x"+o.substring(256,320)),c=new BigNumber("0x"+o.substring(320,384));$("#deposit_total").html(n.dp(4).toString(10)+" "+tokenList[t].units),$("#deposit_num_pool_1").html(i.toString(10)),$("#deposit_num_pool_2").html(r.toString(10)),"none"!=$("#pool_3_num_div").css("display")&&$("#deposit_num_pool_3").html(s.toString(10));var u=Math.floor((new Date).getTime()/1e3);if(a.comparedTo(0)>0){var l=u-parseInt(a.toString(10)),h=Math.floor(l/3600),_=Math.floor(l%3600/60),p="HRS";1==h&&(p="HR"),h>0?$("#deposit_time_pool_1").html(h+" "+p+", "+_+" MINS AGO"):$("#deposit_time_pool_1").html(_+" MINS AGO")}else $("#deposit_time_pool_1").html("NO DEPOSITS");if(d.comparedTo(0)>0){l=u-parseInt(d.toString(10)),h=Math.floor(l/3600),_=Math.floor(l%3600/60),p="HRS";1==h&&(p="HR"),h>0?$("#deposit_time_pool_2").html(h+" "+p+", "+_+" MINS AGO"):$("#deposit_time_pool_2").html(_+" MINS AGO")}else $("#deposit_time_pool_2").html("NO DEPOSITS");if("none"!=$("#pool_3_last_div").css("display"))if(c.comparedTo(0)>0){l=u-parseInt(c.toString(10)),h=Math.floor(l/3600),_=Math.floor(l%3600/60),p="HRS";1==h&&(p="HR"),h>0?$("#deposit_time_pool_3").html(h+" "+p+", "+_+" MINS AGO"):$("#deposit_time_pool_3").html(_+" MINS AGO")}else $("#deposit_time_pool_3").html("NO DEPOSITS")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function checkAllowance(){for(var e=-1,t=$("#deposit_account").children("option:selected").val(),o=0;o<tokenList.length;o++)if(tokenList[o].units.toLowerCase()==t.toLowerCase()){e=o;break}if(-1!=e){var i=tokenList[e].token,n=padleftzero(userAddress.substring(2),64),r=padleftzero(proxyAddress.substring(2),64);if("none"==$("#deposit_action_buttons").css("display")&&"none"==$("#unlock_button").css("display")||1==$("#unlock_inner_button").prop("disabled")){const e=[{to:i,data:"0x"+contract_viewallowance+n+r},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2);new BigNumber("0x"+t.substring(0,64)).comparedTo(1)<0?$("#unlock_button").show():($("#unlock_button").hide(),$("#deposit_action_buttons").show(),matchColumnLength())}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}}}function addWithdrawRequestBox(e,t,o,i,n,r,s,a){var d=e,c='<div class="withdraw_request_box" id="request_'+d+'" onclick=\'executeWithdraw("'+d+"\");'>";c+='<div class="withdraw_request_inner_left">&#x25A0;</div>',c+=n>0?'<div class="withdraw_request_inner_right" style="min-width: 150px;"><strong>YOUR COST:</strong><br>'+n+" ETH<br>GAS FEE</div>":'<div class="withdraw_request_inner_right" style="min-width: 150px;"><strong>YOUR COST:</strong><br>GAS FEE</div>';var u=new BigNumber(r);c+='<div class="withdraw_request_inner_right"><strong>YOUR REWARD:</strong><br>'+(u="dai"==s||"usdc"==s||"usdt"==s?new BigNumber(10).plus(u.minus(10).div(2)):u.div(2)).dp(18).toString(10)+" "+s.toUpperCase()+"</div>",c+='<input type="hidden" id="request_'+d+'_proof" value="'+t+'">',c+='<input type="hidden" id="request_'+d+'_root" value="'+o+'">',c+='<input type="hidden" id="request_'+d+'_recipient" value="'+i+'">',c+='<input type="hidden" id="request_'+d+'_ethfee" value="'+n+'">',c+='<input type="hidden" id="request_'+d+'_reward" value="'+r+'">',c+='<input type="hidden" id="request_'+d+'_currency" value="'+s+'">',c+='<input type="hidden" id="request_'+d+'_amount" value="'+a+'">',c+="</div>",$("#request_container").append(c)}function loadWithdrawRequests(e){$("#request_next_page").length&&$("#request_next_page").remove(),$(".withdraw_request_box").length>0&&$(".withdraw_request_box").remove(),$.post(apiURL,{request_type:"view_requests",page:e},function(t){if(t&&void 0!==t.result){var o=t.result.length;if(0==o)0==e?$("#request_header").html("NO REQUESTS EXISTS"):($("#request_header").html("NO MORE REQUESTS"),$("#request_container").append('<span id="request_next_page" onclick="loadWithdrawRequests('+(e-1)+')" style="cursor: pointer;"><br>BACK PAGE</span>'));else{$("#request_header").html("COMPLETE THE WITHDRAW REQUESTS BELOW TO EARN THE REWARD");for(var i=0;i<o;i++){var n=t.result[i].nullifier_hash,r=t.result[i].currency,s=t.result[i].proof,a=t.result[i].root,d=t.result[i].recipient,c=new BigNumber(t.result[i].amount),u=new BigNumber(t.result[i].eth_fee),l=new BigNumber(t.result[i].reward);addWithdrawRequestBox(n,s,a,d,u.dp(18).toString(10),l.dp(18).toString(10),r,c.dp(18).toString(10))}o>=10&&$("#request_container").append('<span id="request_next_page" onclick="loadWithdrawRequests('+(e+1)+')" style="cursor: pointer;"><br>NEXT PAGE</span>')}}})}function refreshAccountData(){window.setTimeout(refreshAccountData,6e4),checkAllowance(),checkPoolInfo(),getEtherPrice(),getEthereumGasPrice()}function unlockAccount(){for(var e=0,t=$("#deposit_account").children("option:selected").val(),o=0;o<tokenList.length;o++)if(tokenList[o].units.toLowerCase()==t.toLowerCase()){e=o;break}var i=new BigNumber(2).pow(256).minus(1),n=proxyAddress.substring(2);n=padleftzero(n,64);var r=i.toString(16);r=padleftzero(r,64),sendETHTransaction([{to:tokenList[e].token,gas:"0x186A0",from:userAddress,data:"0x"+contract_approve+n+r}],function(){$("#unlock_inner_button").prop("disabled",!0),$("#unlock_inner_button").html("UNLOCKING "+tokenList[e].units+" TO DEPOSIT")})}function sendETHTransaction(e,t){0==new BigNumber("0x"+ethereum.chainId.substring(2)).comparedTo(targetNetwork)?ethereum.request({method:"eth_sendTransaction",params:e}).then(e=>{console.log("Transaction hash: "+e),t&&t()}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}):alert("This application requires the main network, please switch it in your MetaMask UI.")}function setCookie(e,t,o){var i="";if(o>0){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3),i="; expires="+n.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/; SameSite=Strict"}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var n=o[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}function eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}