var detectMetamask=!1,metamaskConnected=!1,userAddress="",eth_price=new BigNumber(0),gas_price_eth=new BigNumber(0),withdraw_note="",global_objects={},deposit_gas_units=new BigNumber(12e5),withdraw_gas_units=new BigNumber(5e5),proxyAddress="0xcA4530692F73110e5E15E2D07049bcFd5Adbe0de",apiURL="../../api/requests/",contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_depositDAI="8c678254",contract_depositUSDC="7c34c355",contract_depositUSDT="9bb0b783",contract_depositYUSD="34407707",contract_depositLINK="f34ee3ea",contract_depositWBTC="12a86993",contract_depositRenBTC="bf138997",contract_depositCRVBTC="dd028d24",contract_withdrawDAI="7bd0d2af",contract_withdrawUSDC="2db80eb1",contract_withdrawUSDT="4fdc0c90",contract_withdrawYUSD="7708fd95",contract_withdrawLINK="315e573d",contract_withdrawWBTC="9b043c4c",contract_withdrawRenBTC="8dbe5d4f",contract_withdrawCRVBTC="7e87c48e",contract_getPoolsTotal="10237955",contract_getPoolsDetail="131da313",targetNetwork=1;$(window).on("load",function(){checkMetaMaskExist(),loadTokenList(),updateDepositView(),$("#accounts_header").html("Connect to MetaMask to view the accounts"),$("#deposit_account").change(function(){updateDepositView(),checkAllowance(),checkPoolInfo()})});function updateDepositView(){for(var a=$("#deposit_account").children("option:selected").val(),b=-1,c=0;c<tokenList.length;c++)if(tokenList[c].units.toLowerCase()==a.toLowerCase()){b=c;break}-1==b||($("#deposit_action_buttons").hide(),$("#unlock_button").hide(),$("#note").html(""),$("#note_field").hide(),$("#deposit_gen_tran_button").html("GENERATE NOTE >"),$("#deposit_options").show(),$("#unlock_inner_button").html("UNLOCK "+tokenList[b].units+" TO DEPOSIT >"),"renbtc"==a||"wbtc"==a||"crvbtc"==a?($("#total_pools_header").html("ALL POOLS"),$("#pool_1_num_header").html("0.01 POOL"),$("#pool_2_num_header").html("0.1 POOL"),$("#pool_3_num_header").html("1 POOL"),$("#pool_1_last_header").html("0.01 POOL"),$("#pool_2_last_header").html("0.1 POOL"),$("#pool_3_last_header").html("1 POOL"),$("#pool_3_num_div").show(),$("#pool_3_last_div").show(),$("#deposit_1_input").val("0.01"),$("#deposit_2_input").val("0.1"),$("#deposit_3_input").val("1"),$("#deposit_3_div").show(),$("#deposit_1_unit").html("0.01 "+tokenList[b].units+"<br>"),$("#deposit_2_unit").html("0.1 "+tokenList[b].units+"<br>"),$("#deposit_3_unit").html("1 "+tokenList[b].units)):($("#total_pools_header").html("BOTH POOLS"),$("#pool_3_num_div").hide(),$("#pool_3_last_div").hide(),$("#deposit_3_div").hide(),"link"==a?($("#pool_1_num_header").html("10 POOL"),$("#pool_2_num_header").html("100 POOL"),$("#pool_1_last_header").html("10 POOL"),$("#pool_2_last_header").html("100 POOL"),$("#deposit_1_input").val("10"),$("#deposit_2_input").val("100"),$("#deposit_1_unit").html("10 "+tokenList[b].units),$("#deposit_2_unit").html("100 "+tokenList[b].units)):($("#pool_1_num_header").html("100 POOL"),$("#pool_2_num_header").html("1000 POOL"),$("#pool_1_last_header").html("100 POOL"),$("#pool_2_last_header").html("1000 POOL"),$("#deposit_1_input").val("100"),$("#deposit_2_input").val("1000"),$("#deposit_1_unit").html("100 "+tokenList[b].units),$("#deposit_2_unit").html("1000 "+tokenList[b].units))),$("#deposit_1_input").prop("checked",!0),matchColumnLength())}var tokenList=[];function loadTokenList(){tokenList.push({token:"0x6B175474E89094C44Da98b954EedeAC495271d0F",units:"DAI",decimals:18,stable:!0}),tokenList.push({token:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",units:"USDC",decimals:6,stable:!0}),tokenList.push({token:"0xdAC17F958D2ee523a2206206994597C13D831ec7",units:"USDT",decimals:6,stable:!0}),tokenList.push({token:"0x5dbcF33D8c2E976c6b560249878e6F1491Bca25c",units:"yUSD",decimals:18,stable:!1}),tokenList.push({token:"0x514910771AF9Ca656af840dff83E8264EcF986CA",units:"LINK",decimals:18,stable:!1}),tokenList.push({token:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",units:"wBTC",decimals:8}),tokenList.push({token:"0xEB4C2781e4ebA804CE9a9803C67d0893436bB27D",units:"renBTC",decimals:8}),tokenList.push({token:"0x49849C98ae39Fff122806C06791Fa73784FB3675",units:"CRVBTC",decimals:18})}function checkMetaMaskExist(){if("undefined"!=typeof window.ethereum&&!0==ethereum.isMetaMask){detectMetamask=!0;var a=getCookie("metamask");null==a?$("#metamask_interactive").html("Connect MetaMask"):!1==metamaskConnected&&enableMetaMask()}}async function enableMetaMask(){const a=await ethereum.request({method:"eth_requestAccounts"});if(a){ethereum.chainId||(ethereum.chainId="0x1");var b=new BigNumber("0x"+ethereum.chainId.substring(2));if(0!=b.comparedTo(targetNetwork))return void alert("This application requires the main network, please switch it in your MetaMask UI.");userAddress=a[0],metamaskConnected=!0,setCookie("metamask","active",0),-1<window.location.href.indexOf("mirror")&&(apiURL="https://www.stabilize.finance/api/requests/"),$("#loading_panel").hide(),$("#data_panel").show(),matchColumnLength(),refreshAccountData(),loadWithdrawRequests(0),null==global_objects.web3_instance&&global_objects.initWeb3(!0,!1),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(a){userAddress=a[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(){location.reload()})}}function metamaskButtonClick(){if(!1==detectMetamask)window.open("https://metamask.io/","_blank");else!0==detectMetamask&&!1==metamaskConnected&&enableMetaMask()}function padleftzero(a,b){return a=a.toString(),a.length<b?padleftzero("0"+a,b):a}function padrightzero(a,b){return a=a.toString(),a.length<b?padrightzero(a+"0",b):a}function matchColumnLength(){if("0px"!=$("#request_column").css("borderLeftWidth")){var a=parseFloat($("#request_column").css("height")),b=parseFloat($("#teller_column").css("height"));a<b&&$("#request_column").css("min-height",b)}}function getEthereumGasPrice(){$.get("https://www.etherchain.org/api/gasPriceOracle",function(a){a&&(gas_price_eth=new BigNumber(a.standard).div(1e9))})}function getEtherPrice(){$.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd",function(a){a&&(eth_price=new BigNumber(a.ethereum.usd))})}function getCoinPriceWithdraw(a,b){var c="dai";"usdc"==a?c="usd-coin":"usdt"==a?c="tether":"yusd"==a?c="yvault-lp-ycurve":"link"==a?c="chainlink":"wbtc"==a?c="wrapped-bitcoin":"renbtc"==a?c="renbtc":"crvbtc"==a&&(c="lp-renbtc-curve");var d="https://api.coingecko.com/api/v3/simple/price?ids="+c+"&vs_currencies=usd";$.get(d,function(d){d&&(price=new BigNumber(d[c].usd),calculateWithdrawFee(price,b,a))})}function calculateWithdrawFee(a,b,c){for(var d=new BigNumber(b),e=new BigNumber(0),f=-1,g=0;g<tokenList.length;g++)if(tokenList[g].units.toLowerCase()==c){f=g;break}if(-1!=f){if(!0==tokenList[f].stable){var h=new BigNumber(.01),j=new BigNumber(.001),k=new BigNumber(1.02),l=new BigNumber(.98);if(0>=a.comparedTo(l))e=h;else if(0<=a.comparedTo(k))e=j;else{var m=h.minus(j).div(k.minus(l)),n=a.minus(l).times(m);e=new BigNumber(h).minus(n)}d=d.times(e),d=d.plus(10),d=new BigNumber(d.integerValue(BigNumber.ROUND_CEIL)),$("#withdraw_fee").html(d.dp(0).toString(10))}else{var o=new BigNumber(.001);d=d.times(o),d=d.plus(new BigNumber(10).div(a)),$("#withdraw_fee").html(d.dp(5).toString(10))}$("#token_price").val(a.dp(8).toString(10))}}function performDepositAction(){if("none"==$("#note_field").css("display")){if(null==global_objects.web3_instance)return void alert("Security modules not loaded yet");var a=$("#deposit_account").children("option:selected").val().toLowerCase(),b=new BigNumber($("input[name=deposit_number]:checked","#deposit_options").val()),c=global_objects.generateDepositNote(a,b,targetNetwork);$("#note").html(c),$("#deposit_options").hide(),$("#note_field").show(),$("#deposit_gen_tran_button").html("DEPOSIT >"),matchColumnLength()}else{for(var c=$("#note").text(),b=new BigNumber($("input[name=deposit_number]:checked","#deposit_options").val()),a=$("#deposit_account").children("option:selected").val().toLowerCase(),d=-1,e=0;e<tokenList.length;e++)if(tokenList[e].units.toLowerCase()==a){d=e;break}if(-1==d)return;b=b.times(new BigNumber(10).pow(tokenList[d].decimals));var f=contract_depositDAI;"usdc"==a?f=contract_depositUSDC:"usdt"==a?f=contract_depositUSDT:"yusd"==a?f=contract_depositYUSD:"link"==a?f=contract_depositLINK:"wbtc"==a?f=contract_depositWBTC:"renbtc"==a?f=contract_depositRenBTC:"crvbtc"==a&&(f=contract_depositCRVBTC);var g=global_objects.createDepositCommitment(c),h=g.substring(2);h=padrightzero(h,64);var j=b.toString(16);j=padleftzero(j,64);const i=[{to:proxyAddress,from:userAddress,data:"0x"+f+h+j}];sendETHTransaction(i,function(){$("#note").html(""),$("#note_field").hide(),$("#deposit_gen_tran_button").html("GENERATE NOTE >"),$("#deposit_options").show()})}}function executeWithdraw(a){if(null==global_objects.web3_instance)return void alert("Security modules not loaded yet");var b=$("#request_"+a+"_proof").val(),c=$("#request_"+a+"_root").val(),d=$("#request_"+a+"_recipient").val(),e=new BigNumber($("#request_"+a+"_ethfee").val()),f=new BigNumber($("#request_"+a+"_reward").val()),g=$("#request_"+a+"_currency").val().toLowerCase(),h=new BigNumber($("#request_"+a+"_amount").val());e=e.times(new BigNumber(10).pow(18));for(var j=-1,k=0;k<tokenList.length;k++)if(tokenList[k].units.toLowerCase()==g){j=k;break}if(-1!=j){f=f.times(new BigNumber(10).pow(tokenList[j].decimals)),h=h.times(new BigNumber(10).pow(tokenList[j].decimals));var l=global_objects.web3_instance.eth.abi.encodeParameters(["bytes","uint256","bytes32","bytes32","address","address","uint256","uint256"],[b,h.toString(10),c,a,d,proxyAddress,f.toString(10),e.toString(10)]);l=l.substring(2);var m=contract_withdrawDAI;"usdc"==g?m=contract_withdrawUSDC:"usdt"==g?m=contract_withdrawUSDT:"yusd"==g?m=contract_withdrawYUSD:"link"==g?m=contract_withdrawLINK:"wbtc"==g?m=contract_withdrawWBTC:"renbtc"==g?m=contract_withdrawRenBTC:"crvbtc"==g&&(m=contract_withdrawCRVBTC);const i=[{to:proxyAddress,value:e.toString(16),from:userAddress,data:"0x"+m+l}];sendETHTransaction(i,function(){removeWithdrawRequest(a)})}}function removeWithdrawRequest(a){$("#request_"+a).remove()}async function processNote(){if(null==global_objects.web3_instance)return void alert("Security modules not loaded yet");if(withdraw_note=$("#deposit_note_withdraw").val().trim(),!(5>withdraw_note.length))try{$("#start_button").html("LOADING KEYS..."),$("#start_button").prop("disabled",!0);try{await global_objects.initWeb3(!1,!0)}catch(a){alert("Failed to load security module's keys"),console.log("Security module error: "+a)}for(var{currency:a,amount:b,netId:c,deposit:d}=global_objects.parseNote(withdraw_note),e=-1,f=0;f<tokenList.length;f++)if(tokenList[f].units.toLowerCase()==a.toLowerCase()){e=f;break}if(-1==e)return;$("#withdraw_account").html(tokenList[f].units),$("#tip_coin").html(tokenList[f].units),$("#withdraw_amount").html(b),$("#withdraw_fee").html(""),getCoinPriceWithdraw(a.toLowerCase(),b),$("#deposit_note_withdraw").val(""),$("#start_withdraw_div").hide(),$("#finish_withdraw_div").show(),matchColumnLength()}catch{alert("Failed to parse deposit note"),resetWithdrawWindow()}}async function postProof(){var a=$("#withdraw_address").val().trim();if(42!=a.length)return void alert("Ethereum address is invalid");if(0==$("#withdraw_fee").text().length)return void alert("Still waiting on fee calculation");var b=new BigNumber($("#withdraw_eth").val()),c=new BigNumber($("#withdraw_tip").val());if(c=c.plus($("#withdraw_fee").text()),0>c.times($("#token_price").val()).comparedTo(b.times(eth_price)))return void alert("Your tip amount is not high enough to cover your ETH requested");if(0<=c.comparedTo(new BigNumber($("#withdraw_amount").text())))return void alert("Your tip amount cannot be greater than or equal to the amount withdrawn");var d=withdraw_gas_units.times(gas_price_eth).times(eth_price),e=c.times($("#token_price").val()).minus(10).div(2).plus(10);if(0<d.comparedTo(e)){var f=confirm("This request is not economic for the withdrawer due to gas cost, it may never be fulfilled. Consider giving more tips. Do you want to continue?");if(!1==f)return}$("#withdraw_button").html("REQUESTING WITHDRAW..."),$("#withdraw_button").css("disabled",!0),$("#withdraw_code").html("<br>This may take a few minutes as a zkSnark proof needs to be generated.<br>"),$("#withdraw_code").show();try{const{proof:d,args:e}=await global_objects.generateWithdrawalProof(withdraw_note,a,proxyAddress,c.dp(5).toString(10),b.dp(18).toString(10));if("undefined"==typeof d)throw"Unable to generate proof";for(var g=$("#withdraw_account").text().toLowerCase(),h=-1,j=0;j<tokenList.length;j++)if(tokenList[j].units.toLowerCase()==g){h=j;break}if(-1==h)return;var k=new BigNumber($("#withdraw_amount").text());k=k.times(new BigNumber(10).pow(tokenList[h].decimals));var l=c.dp(5).times(new BigNumber(10).pow(tokenList[h].decimals)),m=b.times(new BigNumber(10).pow(18)),n=global_objects.web3_instance.eth.abi.encodeParameters(["bytes","uint256","bytes32","bytes32","address","address","uint256","uint256"],[d,k.dp(0).toString(10),e[0],e[1],e[2],e[3],l.dp(0).toString(10),m.dp(0).toString(10)]);$.post(apiURL,{request_type:"add_new",currency:g,abi:n,proof:d,root:e[0],nullifierHash:e[1],recipient:e[2],fee:l.toString(16),eth_refund:m.toString(16),amount:k.toString(16)},function(a){a?"undefined"==typeof a.error?($("#withdraw_button").html("DONE"),$("#withdraw_code").html("<br>Withdraw request posted/updated successfully<br>"),window.setTimeout(function(){loadWithdrawRequests(0),resetWithdrawWindow()},5e3)):($("#withdraw_code").html("<br>"+a.error+"<br>"),$("#withdraw_button").html("REQUEST WITHDRAW >"),$("#withdraw_button").css("disabled",!1)):($("#withdraw_code").html("<br>Failed to get a response from server<br>"),$("#withdraw_button").html("REQUEST WITHDRAW >"),$("#withdraw_button").css("disabled",!1))})}catch(a){alert("Failed to generate proof: "+a),resetWithdrawWindow()}}function resetWithdrawWindow(){$("#finish_withdraw_div").hide(),$("#start_withdraw_div").show(),$("#withdraw_eth").val("0"),$("#withdraw_tip").val("0"),$("#token_price").val("0"),$("#deposit_note_withdraw").val(""),$("#withdraw_button").html("REQUEST WITHDRAW >"),$("#withdraw_code").hide(),$("#withdraw_button").css("disabled",!1),$("#start_button").html("START >"),$("#start_button").prop("disabled",!1),withdraw_note=""}function checkPoolInfo(){for(var a=$("#deposit_account").children("option:selected").val().toLowerCase(),b=-1,c=0;c<tokenList.length;c++)if(tokenList[c].units.toLowerCase()==a){b=c;break}if(-1!=b){var d=new BigNumber(b),e=d.toString(16);e=padleftzero(e,64);const a=[{to:proxyAddress,data:"0x"+contract_getPoolsTotal+e},"latest"];ethereum.request({method:"eth_call",params:a}).then(a=>{var c=a.substring(2),d=new BigNumber("0x"+c.substring(0,64));d=d.div(new BigNumber(10).pow(tokenList[b].decimals));const f=[{to:proxyAddress,data:"0x"+contract_getPoolsDetail+e},"latest"];ethereum.request({method:"eth_call",params:f}).then(a=>{var c=a.substring(2),e=new BigNumber("0x"+c.substring(0,64)),f=new BigNumber("0x"+c.substring(64,128)),g=new BigNumber("0x"+c.substring(128,192)),h=new BigNumber("0x"+c.substring(192,256)),i=new BigNumber("0x"+c.substring(256,320)),j=new BigNumber("0x"+c.substring(320,384));$("#deposit_total").html(d.dp(4).toString(10)+" "+tokenList[b].units),$("#deposit_num_pool_1").html(e.toString(10)),$("#deposit_num_pool_2").html(f.toString(10)),"none"!=$("#pool_3_num_div").css("display")&&$("#deposit_num_pool_3").html(g.toString(10));var k=Math.floor(new Date().getTime()/1e3);if(0<h.comparedTo(0)){var l=k-parseInt(h.toString(10)),m=Math.floor(l/3600),n=Math.floor(l%3600/60),o="HRS";1==m&&(o="HR"),0<m?$("#deposit_time_pool_1").html(m+" "+o+", "+n+" MINS AGO"):$("#deposit_time_pool_1").html(n+" MINS AGO")}else $("#deposit_time_pool_1").html("NO DEPOSITS");if(0<i.comparedTo(0)){var l=k-parseInt(i.toString(10)),m=Math.floor(l/3600),n=Math.floor(l%3600/60),o="HRS";1==m&&(o="HR"),0<m?$("#deposit_time_pool_2").html(m+" "+o+", "+n+" MINS AGO"):$("#deposit_time_pool_2").html(n+" MINS AGO")}else $("#deposit_time_pool_2").html("NO DEPOSITS");if("none"!=$("#pool_3_last_div").css("display"))if(0<j.comparedTo(0)){var l=k-parseInt(j.toString(10)),m=Math.floor(l/3600),n=Math.floor(l%3600/60),o="HRS";1==m&&(o="HR"),0<m?$("#deposit_time_pool_3").html(m+" "+o+", "+n+" MINS AGO"):$("#deposit_time_pool_3").html(n+" MINS AGO")}else $("#deposit_time_pool_3").html("NO DEPOSITS")}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}}function checkAllowance(){for(var a=-1,b=$("#deposit_account").children("option:selected").val(),c=0;c<tokenList.length;c++)if(tokenList[c].units.toLowerCase()==b.toLowerCase()){a=c;break}if(-1!=a){var d=tokenList[a].token,e=padleftzero(userAddress.substring(2),64),f=padleftzero(proxyAddress.substring(2),64);if("none"==$("#deposit_action_buttons").css("display")&&"none"==$("#unlock_button").css("display")||!0==$("#unlock_inner_button").prop("disabled")){ethereum.request({method:"eth_call",params:[{to:d,data:"0x"+contract_viewallowance+e+f},"latest"]}).then(a=>{var b=a.substring(2),c=new BigNumber("0x"+b.substring(0,64));0>c.comparedTo(1)?$("#unlock_button").show():($("#unlock_button").hide(),$("#deposit_action_buttons").show(),matchColumnLength())}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}}}function addWithdrawRequestBox(a,b,c,d,e,f,g,h){var i=a,j="<div class=\"withdraw_request_box\" id=\"request_"+i+"\" onclick='executeWithdraw(\""+i+"\");'>";j+="<div class=\"withdraw_request_inner_left\">&#x25A0;</div>",j+=0<e?"<div class=\"withdraw_request_inner_right\" style=\"min-width: 150px;\"><strong>YOUR COST:</strong><br>"+e+" ETH<br>GAS FEE</div>":"<div class=\"withdraw_request_inner_right\" style=\"min-width: 150px;\"><strong>YOUR COST:</strong><br>GAS FEE</div>";var k=new BigNumber(f);k="dai"==g||"usdc"==g||"usdt"==g?new BigNumber(10).plus(k.minus(10).div(2)):k.div(2),j+="<div class=\"withdraw_request_inner_right\"><strong>YOUR REWARD:</strong><br>"+k.dp(18).toString(10)+" "+g.toUpperCase()+"</div>",j+="<input type=\"hidden\" id=\"request_"+i+"_proof\" value=\""+b+"\">",j+="<input type=\"hidden\" id=\"request_"+i+"_root\" value=\""+c+"\">",j+="<input type=\"hidden\" id=\"request_"+i+"_recipient\" value=\""+d+"\">",j+="<input type=\"hidden\" id=\"request_"+i+"_ethfee\" value=\""+e+"\">",j+="<input type=\"hidden\" id=\"request_"+i+"_reward\" value=\""+f+"\">",j+="<input type=\"hidden\" id=\"request_"+i+"_currency\" value=\""+g+"\">",j+="<input type=\"hidden\" id=\"request_"+i+"_amount\" value=\""+h+"\">",j+="</div>",$("#request_container").append(j)}function loadWithdrawRequests(a){$("#request_next_page").length&&$("#request_next_page").remove(),0<$(".withdraw_request_box").length&&$(".withdraw_request_box").remove(),$.post(apiURL,{request_type:"view_requests",page:a},function(b){if(b&&"undefined"!=typeof b.result){var c=b.result.length;if(0==c)0==a?$("#request_header").html("NO REQUESTS EXISTS"):($("#request_header").html("NO MORE REQUESTS"),$("#request_container").append("<span id=\"request_next_page\" onclick=\"loadWithdrawRequests("+(a-1)+")\" style=\"cursor: pointer;\"><br>BACK PAGE</span>"));else{$("#request_header").html("COMPLETE THE WITHDRAW REQUESTS BELOW TO EARN THE REWARD");for(var d=0;d<c;d++){var e=b.result[d].nullifier_hash,f=b.result[d].currency,g=b.result[d].proof,h=b.result[d].root,j=b.result[d].recipient,k=new BigNumber(b.result[d].amount),l=new BigNumber(b.result[d].eth_fee),m=new BigNumber(b.result[d].reward);addWithdrawRequestBox(e,g,h,j,l.dp(18).toString(10),m.dp(18).toString(10),f,k.dp(18).toString(10))}10<=c&&$("#request_container").append("<span id=\"request_next_page\" onclick=\"loadWithdrawRequests("+(a+1)+")\" style=\"cursor: pointer;\"><br>NEXT PAGE</span>")}}})}function refreshAccountData(){window.setTimeout(refreshAccountData,6e4),checkAllowance(),checkPoolInfo(),getEtherPrice(),getEthereumGasPrice()}function unlockAccount(){for(var a=0,b=$("#deposit_account").children("option:selected").val(),c=0;c<tokenList.length;c++)if(tokenList[c].units.toLowerCase()==b.toLowerCase()){a=c;break}var d=new BigNumber(2).pow(256).minus(1),e=proxyAddress.substring(2);e=padleftzero(e,64);var f=d.toString(16);f=padleftzero(f,64);const g=[{to:tokenList[a].token,gas:"0x186A0",from:userAddress,data:"0x"+contract_approve+e+f}];sendETHTransaction(g,function(){$("#unlock_inner_button").prop("disabled",!0),$("#unlock_inner_button").html("UNLOCKING "+tokenList[a].units+" TO DEPOSIT")})}function sendETHTransaction(a,b){var c=new BigNumber("0x"+ethereum.chainId.substring(2));return 0==c.comparedTo(targetNetwork)?void ethereum.request({method:"eth_sendTransaction",params:a}).then(a=>{console.log("Transaction hash: "+a),b&&b()}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))}):void alert("This application requires the main network, please switch it in your MetaMask UI.")}function setCookie(a,b,c){var d="";if(0<c){var e=new Date;e.setTime(e.getTime()+1e3*(60*(60*(24*c)))),d="; expires="+e.toUTCString()}document.cookie=a+"="+(b||"")+d+"; path=/; SameSite=Strict"}function getCookie(a){for(var b,d=a+"=",e=document.cookie.split(";"),f=0;f<e.length;f++){for(b=e[f];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(d))return b.substring(d.length,b.length)}return null}function eraseCookie(a){document.cookie=a+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}