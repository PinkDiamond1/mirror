var detectMetamask=!1,metamaskConnected=!1,userAddress="",refreshTimer=null,targetNetwork=1,wethAddress="0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",stolAddress="0x4ff5253E2304e3f5Ed6547Ac5D9952A62B91E3E8",pReethAddress="0x148054772BF9d95E48C8E32868F8e3c497938f04",contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_totalsupply="18160ddd",contract_balanceof="70a08231",contract_migrate="327a1c06";function checkMetaMaskExist(){void 0!==window.ethereum&&(detectMetamask=!0,null==getCookie("metamask")?$("#metamask_interactive").html("Connect Wallet"):0==metamaskConnected&&enableMetaMask())}async function enableMetaMask(){const e=await ethereum.request({method:"eth_requestAccounts"});if(e){var t=await ethereum.request({method:"eth_chainId"});0!=(t=new BigNumber("0x"+t.substring(2))).comparedTo(targetNetwork)&&(0==t.comparedTo(56)?window.location.replace("../../"):alert("This application requires the ETH network, please switch it in your MetaMask UI.")),userAddress=e[0],metamaskConnected=!0,setCookie("metamask","active",0),$("#loading_panel").hide(),$("#data_panel").show(),runCountDownTimer(),updateUI(),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(e){userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(e){location.reload()})}}function metamaskButtonClick(){if(0==detectMetamask)window.open("https://metamask.io/","_blank");else 1==detectMetamask&&0==metamaskConnected&&enableMetaMask()}function padleftzero(e,t){return(e=e.toString()).length<t?padleftzero("0"+e,t):e}function padrightzero(e,t){return(e=e.toString()).length<t?padrightzero(e+"0",t):e}function runCountDownTimer(){var e=Math.floor((new Date).getTime()/1e3);if(1625314726>e){var t=1625314726-e,r=Math.floor(t/3600),n=Math.floor(t%3600/60),a=Math.floor(t%60),o="HRS",s="MINS",i="SECS";1==r&&(o="HR"),1==n&&(s="MIN"),1==a&&(i="SEC");var c=r+" "+o+", ",u=n+" "+s+", ",d=a+" "+i;r<1&&(c="",n<1&&(u="")),$("#countdown_timer").html(c+u+d+"<br>"),window.setTimeout(runCountDownTimer,1e3)}else"none"!=$("#migration_box").css("display")&&($("#countdown_timer").html("ENDED<br>"),$("#migration_box").hide())}async function updateUI(){null!=refreshTimer&&clearTimeout(refreshTimer),refreshTimer=window.setTimeout(updateUI,6e4);var e=[{to:pReethAddress,data:"0x"+contract_totalsupply},"latest"];await ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2),r=new BigNumber("0x"+t.substring(0,64));r=r.div(new BigNumber(10).pow(18)),$("#preeth_total").html(r.dp(8).toString(10))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),checkAllowance()}function checkAllowance(){var e=padleftzero(userAddress.substring(2),64),t=padleftzero(pReethAddress.substring(2),64);if("none"==$("#preeth_action_button").css("display")&&"none"==$("#preeth_unlock_button").css("display")||1==$("#preeth_unlock_inner_button").prop("disabled")){const r=[{to:stolAddress,data:"0x"+contract_viewallowance+e+t},"latest"];ethereum.request({method:"eth_call",params:r}).then(e=>{var t=e.substring(2);new BigNumber("0x"+t.substring(0,64)).comparedTo(1)<0?$("#preeth_unlock_button").show():($("#preeth_unlock_button").hide(),$("#preeth_action_button").show())}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}}function recalculatePReeth(){var e=new BigNumber(213729e-9),t=new BigNumber($("#stol_migrate_amount").val());t.isNaN()&&(t=new BigNumber(0)),t.comparedTo(0)<=0&&(t=new BigNumber(0));var r=t.times(e),n=8;r.comparedTo(1)>0&&(n=2),$("#preeth_button").html("GET "+r.dp(n).toString(10)+" pREETH >")}function unlockSTOL(){var e=new BigNumber(2).pow(256).minus(1),t=pReethAddress.substring(2);t=padleftzero(t.toLowerCase(),64);var r=e.toString(16);r=padleftzero(r,64),sendETHTransaction([{to:stolAddress,gas:"0x186A0",from:userAddress,data:"0x"+contract_approve+t+r}],function(){$("#preeth_unlock_inner_button").prop("disabled",!0),$("#preeth_unlock_inner_button").html("UNLOCKING...")})}function selectMaxSTOL(){var e=padleftzero(userAddress.substring(2),64);const t=[{to:stolAddress,data:"0x"+contract_balanceof+e},"latest"];ethereum.request({method:"eth_call",params:t}).then(e=>{var t=e.substring(2),r=new BigNumber("0x"+t.substring(0,64));r=r.div(new BigNumber(10).pow(18)),$("#stol_migrate_amount").val(r.toString(10)),recalculatePReeth()}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function burnSTOL(){var e=new BigNumber($("#stol_migrate_amount").val());if(e.isNaN())return;if(e.comparedTo(0)<=0)return;var t=(e=e.times(new BigNumber(10).pow(18))).toString(16);t=padleftzero(t,64),sendETHTransaction([{to:pReethAddress,from:userAddress,data:"0x"+contract_migrate+t}],null)}async function sendETHTransaction(e,t){var r=await ethereum.request({method:"eth_chainId"});0==(r=new BigNumber("0x"+r.substring(2))).comparedTo(targetNetwork)?ethereum.request({method:"eth_sendTransaction",params:e}).then(e=>{console.log("Transaction hash: "+e),t&&t()}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}):alert("This application requires the main network, please switch it in your MetaMask UI.")}function setCookie(e,t,r){var n="";if(r>0){var a=new Date;a.setTime(a.getTime()+24*r*60*60*1e3),n="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/; SameSite=Strict"}function getCookie(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var a=r[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}function eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}$(window).on("load",function(){checkMetaMaskExist()});