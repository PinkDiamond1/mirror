var detectMetamask=!1,metamaskConnected=!1,userAddress="",onEthereumNetwork=!1,oracleAddress="0x81A363F3C747dbE947b43486Db4C6AA4DC70DDc4",contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_totalsupply="18160ddd",contract_balanceof="70a08231",contract_getreserves="0902f1ac",contract_token0address="0dfe1681",contract_getPrice="41976e09",targetNetworks=[1,56],stablesPriceList=[];function loadStablesList(){stablesPriceList.push({poolToken:"0x6B175474E89094C44Da98b954EedeAC495271d0F"}),stablesPriceList.push({poolToken:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"}),stablesPriceList.push({poolToken:"0xdAC17F958D2ee523a2206206994597C13D831ec7"}),stablesPriceList.push({poolToken:"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51"})}function checkMetaMaskExist(){void 0!==window.ethereum&&(detectMetamask=!0,null==getCookie("metamask")?$("#metamask_interactive").html("Connect Wallet"):0==metamaskConnected&&enableMetaMask())}async function enableMetaMask(){const e=await ethereum.request({method:"eth_requestAccounts"});if(e){var t=await ethereum.request({method:"eth_chainId"});if(0!=(t=new BigNumber("0x"+t.substring(2))).comparedTo(targetNetworks[0])&&0!=t.comparedTo(targetNetworks[1]))return void alert("This application requires the a supported network (ETH or BSC), please switch it in your MetaMask UI.");onEthereumNetwork=0!=t.comparedTo(targetNetworks[1]),userAddress=e[0],metamaskConnected=!0,setCookie("metamask","active",0),1==onEthereumNetwork?getStablecoinPrices(0):configureBSC(),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(e){userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(e){location.reload()})}}function metamaskButtonClick(){if(0==detectMetamask)window.open("https://metamask.io/","_blank");else 1==detectMetamask&&0==metamaskConnected&&enableMetaMask()}function padleftzero(e,t){return(e=e.toString()).length<t?padleftzero("0"+e,t):e}function padrightzero(e,t){return(e=e.toString()).length<t?padrightzero(e+"0",t):e}function configureBSC(){$("#inner_price_div").hide(),$("#inner_bsc_div").show(),$("#price_div").css("visibility","visible"),$("#bsc_header").css("display","inline-block"),$("#stol_link_div").hide(),$("#pool_link").attr("href","bsc/"),$("#wrap_link").attr("href","bsc/wrap/"),$("#get_started_link").attr("href","bsc/")}function getStablecoinPrices(e){if(0==stablesPriceList.length&&loadStablesList(),0==stablesPriceList.length)return;var t=padleftzero(stablesPriceList[e].poolToken.substring(2),64);const s=[{to:oracleAddress,data:"0x"+contract_getPrice+t},"latest"];ethereum.request({method:"eth_call",params:s}).then(t=>{var s=t.substring(2),r=new BigNumber("0x"+s.substring(0,64));r=r.div(new BigNumber(10).pow(18)),$("#price_panel_"+e).html("$"+r.toFormat(2)),++e<stablesPriceList.length?getStablecoinPrices(e):$("#price_div").css("visibility","visible")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function setCookie(e,t,s){var r="";if(s>0){var a=new Date;a.setTime(a.getTime()+24*s*60*60*1e3),r="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/; SameSite=Strict"}function getCookie(e){for(var t=e+"=",s=document.cookie.split(";"),r=0;r<s.length;r++){for(var a=s[r];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}function eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}$(window).on("load",function(){checkMetaMaskExist()});