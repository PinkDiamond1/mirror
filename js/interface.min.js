var detectMetamask=!1,metamaskConnected=!1,userAddress="",stbzPrice=0,ethPrice=new BigNumber(0),circulatingSupply=new BigNumber(0),TVL=new BigNumber(0),totalTreasury=new BigNumber(0),operatorAddress="0xEe9156C93ebB836513968F92B4A67721f3cEa08a",wethAddress="0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",stbzAddress="0xB987D48Ed8f2C468D52D6405624EADBa5e76d723",oracleAddress="0x438462BF1B159c64C05d795b5589435f318c25fC",treasuryAddress="0x42Cbe17335ef8d52F8d1e0a261eA2e78E829C56e",stakingAddress="0x8c17bE13e034f7fa2a6496bC83B6010be6305204",contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_totalsupply="18160ddd",contract_balanceof="70a08231",contract_getreserves="0902f1ac",contract_token0address="0dfe1681",contract_tokenprice="7b1b1de6",contract_deposit="e2bbb158",contract_staking_deposit="a694fc3a",contract_exit="2af9cc41",contract_staking_exit="7f8661a1",contract_claimReward="1c4b774b",contract_staking_claimReward="3d18b912",contract_poolBalance="351e7cb3",contract_staking_poolBalance="68abb5e0",contract_poolSize="dd034779",contract_staking_poolSize="4ec18db9",contract_rewardEarned="cdfa2c36",contract_staking_rewardEarned="008cc262",contract_rewardRate="cea01962",contract_staking_rewardRate="7b0a47ee",contract_circsupply="9358928b",contract_claimTreasury="379607f5",contract_treasuryBalance="9105d748",contract_getPrice="41976e09",targetNetwork=1,poolList=[],stablesPriceList=[],treasuryList=[],poolRotation=0;$(window).on("load",function(){checkMetaMaskExist()});function loadStablesList(){stablesPriceList.push({poolToken:"0x6B175474E89094C44Da98b954EedeAC495271d0F"}),stablesPriceList.push({poolToken:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"}),stablesPriceList.push({poolToken:"0xdAC17F958D2ee523a2206206994597C13D831ec7"}),stablesPriceList.push({poolToken:"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51"})}function loadPoolList(){poolList.push({poolID:0,poolToken:"0xdb28312a8d26d59978d9b86ca185707b1a26725b",units:"LP",decimals:18,panel:"0",proxy:!1,stbzPool:!1}),poolList.push({poolID:8,poolToken:"0x38ea93D59cc7B83DA7847E9a22eACDDc0751Af77",units:"za-DAI",decimals:18,panel:"8",proxy:!0,underlyingUnits:"DAI",stbzPool:!1}),poolList.push({poolID:9,poolToken:"0x2212F60BC949cF09a8BCCcA29038014094A70231",units:"zs-DAI",decimals:18,panel:"10",proxy:!0,underlyingUnits:"DAI",stbzPool:!1}),poolList.push({poolID:5,poolToken:"0x1D107B258a2BA3a87B301e635dDc336cfDDe153b",units:"za-USDC",decimals:6,panel:"5",proxy:!0,underlyingUnits:"USDC",stbzPool:!1}),poolList.push({poolID:6,poolToken:"0xd1C790B9B2Ac49639f99a88B0a5991dFa6cD2C14",units:"za-USDT",decimals:6,panel:"6",proxy:!0,underlyingUnits:"USDT",stbzPool:!1}),poolList.push({poolID:7,poolToken:"0x2f81fcd5222e0F183Dc2F70d55f4c84fcB59BF4C",units:"za-sUSD",decimals:18,panel:"7",proxy:!0,underlyingUnits:"sUSD",stbzPool:!1}),poolList.push({poolID:-1,poolToken:stbzAddress,units:"STBZ",decimals:18,panel:"9",proxy:!1,stbzPool:!0}),poolList.push({poolID:3,poolToken:"0xdAC17F958D2ee523a2206206994597C13D831ec7",units:"USDT",decimals:6,panel:"3",proxy:!1,stbzPool:!1}),poolList.push({poolID:4,poolToken:"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51",units:"sUSD",decimals:18,panel:"4",proxy:!1,stbzPool:!1}),poolList.push({poolID:1,poolToken:"0x6B175474E89094C44Da98b954EedeAC495271d0F",units:"DAI",decimals:18,panel:"1",proxy:!1,stbzPool:!1})}function loadTreasuryTokens(){treasuryList.push({token:"0x6B175474E89094C44Da98b954EedeAC495271d0F",units:"DAI",decimals:18,tokenID:0,lastBalance:0,isStable:!0}),treasuryList.push({token:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",units:"USDC",decimals:6,tokenID:1,lastBalance:0,isStable:!0}),treasuryList.push({token:"0xdAC17F958D2ee523a2206206994597C13D831ec7",units:"USDT",decimals:6,tokenID:2,lastBalance:0,isStable:!0}),treasuryList.push({token:"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51",units:"sUSD",decimals:18,tokenID:3,lastBalance:0,isStable:!0}),treasuryList.push({token:"0x5dbcF33D8c2E976c6b560249878e6F1491Bca25c",units:"yUSD",decimals:18,tokenID:4,lastBalance:0,isStable:!0}),treasuryList.push({token:"0x514910771AF9Ca656af840dff83E8264EcF986CA",units:"LINK",decimals:18,tokenID:5,lastBalance:0,isStable:!1}),treasuryList.push({token:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",units:"wBTC",decimals:8,tokenID:6,lastBalance:0,isStable:!1}),treasuryList.push({token:"0xEB4C2781e4ebA804CE9a9803C67d0893436bB27D",units:"renBTC",decimals:8,tokenID:7,lastBalance:0,isStable:!1}),treasuryList.push({token:"0x49849C98ae39Fff122806C06791Fa73784FB3675",units:"CRVBTC",decimals:18,tokenID:8,lastBalance:0,isStable:!1}),treasuryList.push({token:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",units:"WETH",decimals:18,tokenID:9,lastBalance:0,isStable:!1}),$("#treasury_amount").on("change keyup paste",personalizeTreasury)}function checkMetaMaskExist(){if("undefined"!=typeof window.ethereum&&!0==ethereum.isMetaMask){detectMetamask=!0;var a=getCookie("metamask");null==a?$("#metamask_interactive").html("Connect MetaMask"):!1==metamaskConnected&&enableMetaMask()}}async function enableMetaMask(){const a=await ethereum.request({method:"eth_requestAccounts"});if(a){ethereum.chainId||(ethereum.chainId="0x1");var b=new BigNumber("0x"+ethereum.chainId.substring(2));if(0!=b.comparedTo(targetNetwork))return void alert("This application requires the main network, please switch it in your MetaMask UI.");userAddress=a[0],metamaskConnected=!0,setCookie("metamask","active",0),$("#data_panel").length?($("#loading_panel").hide(),$("#data_panel").show(),getEtherPrice()):getStablecoinPrices(0),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(a){userAddress=a[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(){location.reload()})}}function metamaskButtonClick(){if(!1==detectMetamask)window.open("https://metamask.io/","_blank");else!0==detectMetamask&&!1==metamaskConnected&&enableMetaMask()}function padleftzero(a,b){return a=a.toString(),a.length<b?padleftzero("0"+a,b):a}function padrightzero(a,b){return a=a.toString(),a.length<b?padrightzero(a+"0",b):a}function getEtherPrice(){$.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd",function(a){a&&(ethPrice=new BigNumber(a.ethereum.usd),0==poolList.length&&(refreshPoolData(!0),refreshTreasuryData()))})}function getStablecoinPrices(a){if(0==stablesPriceList.length&&loadStablesList(),0!=stablesPriceList.length){var b=padleftzero(stablesPriceList[a].poolToken.substring(2),64);ethereum.request({method:"eth_call",params:[{to:oracleAddress,data:"0x"+contract_getPrice+b},"latest"]}).then(b=>{var c=b.substring(2),d=new BigNumber("0x"+c.substring(0,64));d=d.div(new BigNumber(10).pow(18)),$("#price_panel_"+a).html("$"+d.toFormat(2)),a++,a<stablesPriceList.length?getStablecoinPrices(a):$("#price_div").css("visibility","visible")}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}}function getCirculatingSupply(){ethereum.request({method:"eth_call",params:[{to:treasuryAddress,data:"0x"+contract_circsupply},"latest"]}).then(a=>{var b=a.substring(2),c=new BigNumber("0x"+b.substring(0,64)),d=c.div(new BigNumber(10).pow(18));circulatingSupply=d,$("#circ_supply").html(d.toFormat(2))}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}function refreshTreasuryData(){if(0==treasuryList.length&&loadTreasuryTokens(),window.setTimeout(refreshTreasuryData,6e4),"none"==$("#treasury_action_buttons").css("display")&&"none"==$("#treasury_unlock_button").css("display")||!0==$("#treasury_unlock_inner_button").prop("disabled")){var a=poolList[poolRotation].poolToken,b=padleftzero(userAddress.substring(2),64),c=padleftzero(treasuryAddress.substring(2),64);ethereum.request({method:"eth_call",params:[{to:stbzAddress,data:"0x"+contract_viewallowance+b+c},"latest"]}).then(a=>{var b=a.substring(2),c=new BigNumber("0x"+b.substring(0,64));0>c.comparedTo(1)?$("#treasury_unlock_button").show():($("#treasury_unlock_button").hide(),$("#treasury_action_buttons").show())}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}$("#treasury_title").html("<big>TREASURY BALANCE</big>"),totalTreasury=new BigNumber(0);for(var d=0;d<treasuryList.length;d++)(function(a){window.setTimeout(function(){loadTreasuryToken(a)},100*a)})(d)}function loadTreasuryToken(a){var b=a,c=new BigNumber(treasuryList[b].tokenID),d=c.toString(16);d=padleftzero(d,64);const e=[{to:treasuryAddress,data:"0x"+contract_treasuryBalance+d},"latest"];ethereum.request({method:"eth_call",params:e}).then(a=>{var c=a.substring(2),d=new BigNumber("0x"+c.substring(0,64));if(d=d.div(new BigNumber(10).pow(treasuryList[b].decimals)),treasuryList[b].lastBalance=d,!0==treasuryList[b].isStable&&(totalTreasury=totalTreasury.plus(d)),0<d.comparedTo(0)){var e=3;if(!1==treasuryList[b].isStable&&(e=8),$("#treasury_line_"+treasuryList[b].units).length)$("#treasury_line_"+treasuryList[b].units).html(d.dp(e).toString(10)+" "+treasuryList[b].units);else{var f="<div class=\"right_item\" style=\"width: 100%; color: rgb(40,200,40); text-align: center;\" id=\"treasury_line_"+treasuryList[b].units+"\">"+d.dp(e).toString(10)+" "+treasuryList[b].units+"</div>";$("#treasury_contents").append(f),"none"==$("#treasury_view").css("display")&&($("#treasury_placeholder").hide(),$("#treasury_view").show())}}else $("#treasury_line_"+treasuryList[b].units).length&&($("#treasury_line_"+treasuryList[b].units).remove(),0==$("#treasury_contents").children().length&&($("#treasury_view").hide(),$("#treasury_placeholder").show()));b==treasuryList.length-1&&personalizeTreasury()}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}function personalizeTreasury(){if(!(0>=circulatingSupply.comparedTo(0))&&"none"!=$("#treasury_view").css("display")){var a=new BigNumber($("#treasury_amount").val());if(!a.isNaN())if(0<a.comparedTo(0)){if(0<a.comparedTo(circulatingSupply))return;var b=a.div(circulatingSupply);$("#treasury_title").html("<big>TREASURY CLAIMABLE: "+b.times(100).dp(2).toString(10)+"%</big>");for(var c,d=0;d<treasuryList.length;d++)c=3,!1==treasuryList[d].isStable&&(c=8),$("#treasury_line_"+treasuryList[d].units).length&&$("#treasury_line_"+treasuryList[d].units).html(treasuryList[d].lastBalance.times(b).dp(c).toString(10)+" "+treasuryList[d].units)}else{$("#treasury_title").html("<big>TREASURY BALANCE</big>");for(var c,d=0;d<treasuryList.length;d++)c=3,!1==treasuryList[d].isStable&&(c=8),$("#treasury_line_"+treasuryList[d].units).length&&$("#treasury_line_"+treasuryList[d].units).html(treasuryList[d].lastBalance.dp(c).toString(10)+" "+treasuryList[d].units)}}}function refreshPoolData(a){if(0==poolList.length&&loadPoolList(),0==poolRotation)getCirculatingSupply(),TVL=new BigNumber(0),window.setTimeout(function(){refreshPoolData(!0)},6e4);else if(!0==a)return void window.setTimeout(function(){refreshPoolData(!0)},6e4);var b=poolList[poolRotation].panel;if("none"==$("#panel_"+b+"_action_buttons").css("display")&&"none"==$("#panel_"+b+"_unlock_button").css("display")||!0==$("#panel_"+b+"_unlock_inner_button").prop("disabled")){var c=poolList[poolRotation].poolToken,d=padleftzero(userAddress.substring(2),64),e=padleftzero(operatorAddress.substring(2),64);!0==poolList[poolRotation].stbzPool&&(e=padleftzero(stakingAddress.substring(2),64));const a=[{to:c,data:"0x"+contract_viewallowance+d+e},"latest"];ethereum.request({method:"eth_call",params:a}).then(a=>{var c=a.substring(2),d=new BigNumber("0x"+c.substring(0,64));0>d.comparedTo(1)?$("#panel_"+b+"_unlock_button").show():($("#panel_"+b+"_unlock_button").hide(),$("#panel_"+b+"_action_buttons").show())}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}var f,g=poolRotation;if(!1==poolList[g].stbzPool){var h=new BigNumber(poolList[poolRotation].poolID),i=h.toString(16);i=padleftzero(i,64),f=[{to:operatorAddress,data:"0x"+contract_poolSize+i},"latest"]}else f=[{to:stakingAddress,data:"0x"+contract_staking_poolSize},"latest"];ethereum.request({method:"eth_call",params:f}).then(a=>{var c=a.substring(2),d=new BigNumber("0x"+c.substring(0,64));d=d.div(new BigNumber(10).pow(poolList[g].decimals)),$("#panel_"+b+"_poolsize").html(d.dp(2).toString(10)+" "+poolList[g].units);var e=padleftzero(userAddress.substring(2),64);f=!1==poolList[g].stbzPool?[{to:operatorAddress,data:"0x"+contract_poolBalance+i+e},"latest"]:[{to:stakingAddress,data:"0x"+contract_staking_poolBalance+e},"latest"],ethereum.request({method:"eth_call",params:f}).then(a=>{var c=a.substring(2),h=new BigNumber("0x"+c.substring(0,64));h=h.div(new BigNumber(10).pow(poolList[g].decimals)),$("#panel_"+b+"_mybalance").html(h.dp(8).toString(10)+" "+poolList[g].units),0>=h.comparedTo(0)?"none"!=$("#panel_"+b+"_withdraw_button").css("display")&&($("#panel_"+b+"_withdraw_button").hide(),$("#panel_"+b+"_claim_button").hide()):"none"==$("#panel_"+b+"_withdraw_button").css("display")&&($("#panel_"+b+"_withdraw_button").show(),$("#panel_"+b+"_claim_button").show()),!0==poolList[g].proxy&&(f=[{to:poolList[g].poolToken,data:"0x"+contract_tokenprice},"latest"],ethereum.request({method:"eth_call",params:f}).then(a=>{var c=a.substring(2),e=new BigNumber("0x"+c.substring(0,64));e=e.div(new BigNumber(10).pow(18));var f=h.times(e);$("#panel_"+b+"_value").html(f.dp(3).toString(10)+" "+poolList[g].underlyingUnits),TVL=TVL.plus(d.times(e)),(g+1>=poolList.length||0==g)&&$("#tvl").html("$"+TVL.toFormat(2))}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})),f=!1==poolList[g].stbzPool?[{to:operatorAddress,data:"0x"+contract_rewardEarned+i+e},"latest"]:[{to:stakingAddress,data:"0x"+contract_staking_rewardEarned+e},"latest"],ethereum.request({method:"eth_call",params:f}).then(a=>{var c=a.substring(2),e=new BigNumber("0x"+c.substring(0,64));e=e.div(new BigNumber(10).pow(18)),!1==poolList[g].stbzPool?($("#panel_"+b+"_rewardbalance").html(e.dp(4).toString(10)+" STBZ"),f=[{to:operatorAddress,data:"0x"+contract_rewardRate+i},"latest"]):($("#panel_"+b+"_rewardbalance").html(e.dp(8).toString(10)+" WETH"),f=[{to:stakingAddress,data:"0x"+contract_staking_rewardRate},"latest"]),ethereum.request({method:"eth_call",params:f}).then(a=>{var c=a.substring(2),e=new BigNumber("0x"+c.substring(0,64));if("LP"!=poolList[g].units){e=e.div(new BigNumber(10).pow(18)),e=!1==poolList[g].stbzPool?e.times(stbzPrice):e.times(ethPrice),0<d.comparedTo(0)&&(!1==poolList[g].proxy&&!1==poolList[g].stbzPool&&(TVL=TVL.plus(d)),e=!1==poolList[g].stbzPool?e.div(d):e.div(d.times(stbzPrice)));var f=e.times(new BigNumber(86400));f=f.times(100);var h=2;0>f.comparedTo("0.01")&&(h=8),$("#panel_"+b+"_dpy").html(f.dp(h).toString(10)+"%");var i=f.times(365);$("#panel_"+b+"_apr").html(i.dp(h).toString(10)+"%");var j=i.div(100);j=j.div(52).plus(1).pow(52).minus(1).times(100),$("#panel_"+b+"_apy").html(j.dp(h).toString(10)+"%"),!0==poolList[g].proxy&&$("#panel_"+b+"_apy").html($("#panel_"+b+"_apy").html()+" + <a href='wrap/' style='color: rgb(40,200,40);'>Interest &#9654;</a>"),g+1>=poolList.length&&$("#tvl").html("$"+TVL.toFormat(2)),poolRotation++,poolRotation>=poolList.length?(getEtherPrice(),poolRotation=0):window.setTimeout(function(){refreshPoolData(!1)},500)}else getLPTokenDPY(g,d,e)}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}function getLPTokenDPY(a,b,c){const d=[{to:poolList[a].poolToken,data:"0x"+contract_getreserves},"latest"];ethereum.request({method:"eth_call",params:d}).then(d=>{var e=d.substring(2),f=new BigNumber("0x"+e.substring(0,64)),g=new BigNumber("0x"+e.substring(64,128));const h=[{to:poolList[a].poolToken,data:"0x"+contract_token0address},"latest"];ethereum.request({method:"eth_call",params:h}).then(d=>{var e=d.substring(2),h=e.substring(0,64).toLowerCase(),i=padleftzero(wethAddress.substring(2),64).toLowerCase();const j=[{to:poolList[a].poolToken,data:"0x"+contract_totalsupply},"latest"];ethereum.request({method:"eth_call",params:j}).then(d=>{var e=d.substring(2),j=new BigNumber("0x"+e.substring(0,64));if(!(0>=j.comparedTo(0))&&!(0>=ethPrice.comparedTo(0))){var k=0;h==i?(f=f.div(new BigNumber(10).pow(18)).times(ethPrice),0==a&&(stbzPrice=f.div(g.div(new BigNumber(10).pow(18))),$("#stbz_price").html("$"+stbzPrice.toFormat(2))),g=new BigNumber(f)):(g=g.div(new BigNumber(10).pow(18)).times(ethPrice),0==a&&(stbzPrice=g.div(f.div(new BigNumber(10).pow(18))),$("#stbz_price").html("$"+stbzPrice.toFormat(2))),f=new BigNumber(g)),k=f.plus(g),j=j.div(new BigNumber(10).pow(18));var l=b.div(j),m=k.times(l);0>=m.comparedTo(0)?m=1:TVL=TVL.plus(m),c=c.div(new BigNumber(10).pow(18)),c=c.times(stbzPrice),c=c.div(m);var n=c.times(new BigNumber(86400));n=n.times(100),$("#panel_"+poolList[a].panel+"_dpy").html(n.dp(2).toString(10)+"%");var o=n.times(365);$("#panel_"+poolList[a].panel+"_apr").html(o.dp(2).toString(10)+"%");var p=o.div(100);p=p.div(52).plus(1).pow(52).minus(1).times(100),$("#panel_"+poolList[a].panel+"_apy").html(p.dp(2).toString(10)+"%"),a+1>=poolList.length&&$("#tvl").html("$"+TVL.toFormat(2)),poolRotation++,poolRotation>=poolList.length?(getEtherPrice(),poolRotation=0):window.setTimeout(function(){refreshPoolData(!1)},500)}}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}function unlockToken(a){for(var b=0,c=0;c<poolList.length;c++)if(parseInt(poolList[c].panel)==a){b=c;break}var d=new BigNumber(2).pow(256).minus(1),e=operatorAddress.substring(2);!0==poolList[b].stbzPool&&(e=stakingAddress.substring(2)),e=padleftzero(e,64);var f=d.toString(16);f=padleftzero(f,64);const g=[{to:poolList[b].poolToken,gas:"0x186A0",from:userAddress,data:"0x"+contract_approve+e+f}];sendETHTransaction(g,function(){$("#panel_"+a+"_unlock_inner_button").prop("disabled",!0),$("#panel_"+a+"_unlock_inner_button").html("UNLOCKING "+poolList[b].units)})}function unlockTreasury(){var a=new BigNumber(2).pow(256).minus(1),b=treasuryAddress.substring(2);b=padleftzero(b,64);var c=a.toString(16);c=padleftzero(c,64);const d=[{to:stbzAddress,gas:"0x186A0",from:userAddress,data:"0x"+contract_approve+b+c}];sendETHTransaction(d,function(){$("#treasury_unlock_inner_button").prop("disabled",!0),$("#treasury_unlock_inner_button").html("UNLOCKING TREASURY")})}function selectMaxTreasury(){var a=padleftzero(userAddress.substring(2),64);ethereum.request({method:"eth_call",params:[{to:stbzAddress,data:"0x"+contract_balanceof+a},"latest"]}).then(a=>{var b=a.substring(2),c=new BigNumber("0x"+b.substring(0,64));c=c.div(new BigNumber(10).pow(18)),$("#treasury_amount").val(c.toString(10)),personalizeTreasury()}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}function selectMaxOut(a){for(var b=0,c=0;c<poolList.length;c++)if(parseInt(poolList[c].panel)==a){b=c;break}var d;if(!1==poolList[b].stbzPool){var e=new BigNumber(poolList[b].poolID),f=e.toString(16);f=padleftzero(f,64);var g=padleftzero(userAddress.substring(2),64);d=[{to:operatorAddress,data:"0x"+contract_poolBalance+f+g},"latest"]}else{var g=padleftzero(userAddress.substring(2),64);d=[{to:stakingAddress,data:"0x"+contract_staking_poolBalance+g},"latest"]}ethereum.request({method:"eth_call",params:d}).then(c=>{var d=c.substring(2),e=new BigNumber("0x"+d.substring(0,64));e=e.div(new BigNumber(10).pow(poolList[b].decimals)),$("#panel_"+a+"_amount").val(e.toString(10))}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}function selectMaxIn(a){for(var b=0,c=0;c<poolList.length;c++)if(parseInt(poolList[c].panel)==a){b=c;break}var d=padleftzero(userAddress.substring(2),64);const e=[{to:poolList[b].poolToken,data:"0x"+contract_balanceof+d},"latest"];ethereum.request({method:"eth_call",params:e}).then(c=>{var d=c.substring(2),e=new BigNumber("0x"+d.substring(0,64));e=e.div(new BigNumber(10).pow(poolList[b].decimals)),$("#panel_"+a+"_amount").val(e.toString(10))}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))})}function deposit(a){for(var b=0,c=0;c<poolList.length;c++)if(parseInt(poolList[c].panel)==a){b=c;break}var d=new BigNumber($("#panel_"+a+"_amount").val());if(!d.isNaN()&&!(0>=d.comparedTo(0))){d=d.times(new BigNumber(10).pow(poolList[b].decimals));var e=d.toString(16);e=padleftzero(e,64);var f;if(!1==poolList[b].stbzPool){var g=new BigNumber(poolList[b].poolID),h=g.toString(16);h=padleftzero(h,64),f=[{to:operatorAddress,gas:"0x493E0",from:userAddress,data:"0x"+contract_deposit+h+e}]}else f=[{to:stakingAddress,gas:"0x493E0",from:userAddress,data:"0x"+contract_staking_deposit+e}];sendETHTransaction(f,null)}}function withdraw(a){for(var b=0,c=0;c<poolList.length;c++)if(parseInt(poolList[c].panel)==a){b=c;break}var d=new BigNumber($("#panel_"+a+"_amount").val());if(!d.isNaN()&&!(0>=d.comparedTo(0))){d=d.times(new BigNumber(10).pow(poolList[b].decimals));var e=d.toString(16);e=padleftzero(e,64);var f;if(!1==poolList[b].stbzPool){var g=new BigNumber(poolList[b].poolID),h=g.toString(16);h=padleftzero(h,64),f=[{to:operatorAddress,gas:"0x493E0",from:userAddress,data:"0x"+contract_exit+h+e}]}else f=[{to:stakingAddress,gas:"0x493E0",from:userAddress,data:"0x"+contract_staking_exit+e}];sendETHTransaction(f,null)}}function claimTreasury(){var a=new BigNumber($("#treasury_amount").val());if(!a.isNaN()&&!(0>=a.comparedTo(0))&&!(0<a.comparedTo(circulatingSupply))){var b=a.div(circulatingSupply),c=a.times(stbzPrice);if(0<c.comparedTo(totalTreasury.times(b))){var d=confirm("This burn is likely not economic, do you want to continue?");if(!1==d)return}a=a.times(new BigNumber(10).pow(18));var e=a.toString(16);e=padleftzero(e,64);const f=[{to:treasuryAddress,gas:"0x927C0",from:userAddress,data:"0x"+contract_claimTreasury+e}];sendETHTransaction(f,null)}}function claimReward(a){for(var b=0,c=0;c<poolList.length;c++)if(parseInt(poolList[c].panel)==a){b=c;break}var d=new BigNumber(poolList[b].poolID),e=d.toString(16);e=padleftzero(e,64);var f;f=!1==poolList[b].stbzPool?[{to:operatorAddress,gas:"0x30D40",from:userAddress,data:"0x"+contract_claimReward+e}]:[{to:stakingAddress,gas:"0x30D40",from:userAddress,data:"0x"+contract_staking_claimReward}],sendETHTransaction(f,null)}function sendETHTransaction(a,b){var c=new BigNumber("0x"+ethereum.chainId.substring(2));return 0==c.comparedTo(targetNetwork)?void ethereum.request({method:"eth_sendTransaction",params:a}).then(a=>{console.log("Transaction hash: "+a),b&&b()}).catch(a=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(a))}):void alert("This application requires the main network, please switch it in your MetaMask UI.")}function setCookie(a,b,c){var d="";if(0<c){var e=new Date;e.setTime(e.getTime()+1e3*(60*(60*(24*c)))),d="; expires="+e.toUTCString()}document.cookie=a+"="+(b||"")+d+"; path=/; SameSite=Strict"}function getCookie(a){for(var b,d=a+"=",e=document.cookie.split(";"),f=0;f<e.length;f++){for(b=e[f];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(d))return b.substring(d.length,b.length)}return null}function eraseCookie(a){document.cookie=a+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}