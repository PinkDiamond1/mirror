var detectMetamask=!1,metamaskConnected=!1,userAddress="",stbzPrice=0,ethPrice=new BigNumber(0),circulatingSupply=new BigNumber(0),TVL=new BigNumber(0),totalTreasury=new BigNumber(0),operatorAddress="0xEe9156C93ebB836513968F92B4A67721f3cEa08a",wethAddress="0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",stbzAddress="0xB987D48Ed8f2C468D52D6405624EADBa5e76d723",oracleAddress="0x438462BF1B159c64C05d795b5589435f318c25fC",treasuryAddress="0x42Cbe17335ef8d52F8d1e0a261eA2e78E829C56e",stakingAddress="0x8c17bE13e034f7fa2a6496bC83B6010be6305204",contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_totalsupply="18160ddd",contract_balanceof="70a08231",contract_getreserves="0902f1ac",contract_token0address="0dfe1681",contract_tokenprice="7b1b1de6",contract_deposit="e2bbb158",contract_staking_deposit="a694fc3a",contract_exit="2af9cc41",contract_staking_exit="7f8661a1",contract_claimReward="1c4b774b",contract_staking_claimReward="3d18b912",contract_poolBalance="351e7cb3",contract_staking_poolBalance="68abb5e0",contract_poolSize="dd034779",contract_staking_poolSize="4ec18db9",contract_rewardEarned="cdfa2c36",contract_staking_rewardEarned="008cc262",contract_rewardRate="cea01962",contract_staking_rewardRate="7b0a47ee",contract_circsupply="9358928b",contract_claimTreasury="379607f5",contract_treasuryBalance="9105d748",contract_getPrice="41976e09",targetNetwork=1,poolList=[],treasuryList=[],poolRotation=0;function loadPoolList(){poolList.push({poolID:0,poolToken:"0xdb28312a8d26d59978d9b86ca185707b1a26725b",units:"LP",decimals:18,panel:"0",proxy:!1,stbzPool:!1}),poolList.push({poolID:8,poolToken:"0x38ea93D59cc7B83DA7847E9a22eACDDc0751Af77",units:"za-DAI",decimals:18,panel:"8",proxy:!0,underlyingUnits:"DAI",stbzPool:!1}),poolList.push({poolID:5,poolToken:"0x1D107B258a2BA3a87B301e635dDc336cfDDe153b",units:"za-USDC",decimals:6,panel:"5",proxy:!0,underlyingUnits:"USDC",stbzPool:!1}),poolList.push({poolID:6,poolToken:"0xd1C790B9B2Ac49639f99a88B0a5991dFa6cD2C14",units:"za-USDT",decimals:6,panel:"6",proxy:!0,underlyingUnits:"USDT",stbzPool:!1}),poolList.push({poolID:7,poolToken:"0x2f81fcd5222e0F183Dc2F70d55f4c84fcB59BF4C",units:"za-sUSD",decimals:18,panel:"7",proxy:!0,underlyingUnits:"sUSD",stbzPool:!1}),poolList.push({poolID:-1,poolToken:stbzAddress,units:"STBZ",decimals:18,panel:"9",proxy:!1,stbzPool:!0}),poolList.push({poolID:3,poolToken:"0xdAC17F958D2ee523a2206206994597C13D831ec7",units:"USDT",decimals:6,panel:"3",proxy:!1,stbzPool:!1}),poolList.push({poolID:4,poolToken:"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51",units:"sUSD",decimals:18,panel:"4",proxy:!1,stbzPool:!1}),poolList.push({poolID:1,poolToken:"0x6B175474E89094C44Da98b954EedeAC495271d0F",units:"DAI",decimals:18,panel:"1",proxy:!1,stbzPool:!1})}function loadTreasuryTokens(){treasuryList.push({token:"0x6B175474E89094C44Da98b954EedeAC495271d0F",units:"DAI",decimals:18,tokenID:0,lastBalance:0,isStable:!0}),treasuryList.push({token:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",units:"USDC",decimals:6,tokenID:1,lastBalance:0,isStable:!0}),treasuryList.push({token:"0xdAC17F958D2ee523a2206206994597C13D831ec7",units:"USDT",decimals:6,tokenID:2,lastBalance:0,isStable:!0}),treasuryList.push({token:"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51",units:"sUSD",decimals:18,tokenID:3,lastBalance:0,isStable:!0}),treasuryList.push({token:"0x5dbcF33D8c2E976c6b560249878e6F1491Bca25c",units:"yUSD",decimals:18,tokenID:4,lastBalance:0,isStable:!0}),treasuryList.push({token:"0x514910771AF9Ca656af840dff83E8264EcF986CA",units:"LINK",decimals:18,tokenID:5,lastBalance:0,isStable:!1}),treasuryList.push({token:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",units:"wBTC",decimals:8,tokenID:6,lastBalance:0,isStable:!1}),treasuryList.push({token:"0xEB4C2781e4ebA804CE9a9803C67d0893436bB27D",units:"renBTC",decimals:8,tokenID:7,lastBalance:0,isStable:!1}),treasuryList.push({token:"0x49849C98ae39Fff122806C06791Fa73784FB3675",units:"CRVBTC",decimals:18,tokenID:8,lastBalance:0,isStable:!1}),treasuryList.push({token:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",units:"WETH",decimals:18,tokenID:9,lastBalance:0,isStable:!1}),$("#treasury_amount").on("change keyup paste",personalizeTreasury)}function checkMetaMaskExist(){void 0!==window.ethereum&&(1==ethereum.isMetaMask&&(detectMetamask=!0,null==getCookie("metamask")?$("#metamask_interactive").html("Connect MetaMask"):0==metamaskConnected&&enableMetaMask()))}async function enableMetaMask(){const t=await ethereum.request({method:"eth_requestAccounts"});if(t){if(ethereum.chainId||(ethereum.chainId="0x1"),0!=new BigNumber("0x"+ethereum.chainId.substring(2)).comparedTo(targetNetwork))return void alert("This application requires the main network, please switch it in your MetaMask UI.");userAddress=t[0],metamaskConnected=!0,setCookie("metamask","active",0),$("#data_panel").length?($("#loading_panel").hide(),$("#data_panel").show(),getEtherPrice()):getStablecoinPrices(1),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(t){userAddress=t[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(t){location.reload()})}}function metamaskButtonClick(){if(0==detectMetamask)window.open("https://metamask.io/","_blank");else 1==detectMetamask&&0==metamaskConnected&&enableMetaMask()}function padleftzero(t,e){return(t=t.toString()).length<e?padleftzero("0"+t,e):t}function padrightzero(t,e){return(t=t.toString()).length<e?padrightzero(t+"0",e):t}function getEtherPrice(){$.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd",function(t){t&&(ethPrice=new BigNumber(t.ethereum.usd),0==poolList.length&&(refreshPoolData(!0),refreshTreasuryData()))})}function getStablecoinPrices(t){if(0==poolList.length&&loadPoolList(),0==poolList.length)return;var e=padleftzero(poolList[t].poolToken.substring(2),64);const r=[{to:oracleAddress,data:"0x"+contract_getPrice+e},"latest"];ethereum.request({method:"eth_call",params:r}).then(e=>{var r=e.substring(2),o=new BigNumber("0x"+r.substring(0,64));o=o.div(new BigNumber(10).pow(18)),$("#price_panel_"+t).html("$"+o.toFormat(2)),++t<poolList.length?getStablecoinPrices(t):$("#price_div").css("visibility","visible")}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}function getCirculatingSupply(){const t=[{to:treasuryAddress,data:"0x"+contract_circsupply},"latest"];ethereum.request({method:"eth_call",params:t}).then(t=>{var e=t.substring(2),r=new BigNumber("0x"+e.substring(0,64)).div(new BigNumber(10).pow(18));circulatingSupply=r,$("#circ_supply").html(r.toFormat(2))}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}function refreshTreasuryData(){if(0==treasuryList.length&&loadTreasuryTokens(),window.setTimeout(refreshTreasuryData,6e4),"none"==$("#treasury_action_buttons").css("display")&&"none"==$("#treasury_unlock_button").css("display")||1==$("#treasury_unlock_inner_button").prop("disabled")){poolList[poolRotation].poolToken;var t=padleftzero(userAddress.substring(2),64),e=padleftzero(treasuryAddress.substring(2),64);const r=[{to:stbzAddress,data:"0x"+contract_viewallowance+t+e},"latest"];ethereum.request({method:"eth_call",params:r}).then(t=>{var e=t.substring(2);new BigNumber("0x"+e.substring(0,64)).comparedTo(1)<0?$("#treasury_unlock_button").show():($("#treasury_unlock_button").hide(),$("#treasury_action_buttons").show())}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}$("#treasury_title").html("<big>TREASURY BALANCE</big>"),totalTreasury=new BigNumber(0);for(var r=0;r<treasuryList.length;r++)!function(t){var e=r,o=new BigNumber(treasuryList[e].tokenID).toString(16);o=padleftzero(o,64);const a=[{to:treasuryAddress,data:"0x"+contract_treasuryBalance+o},"latest"];ethereum.request({method:"eth_call",params:a}).then(t=>{var r=t.substring(2),o=new BigNumber("0x"+r.substring(0,64));if(o=o.div(new BigNumber(10).pow(treasuryList[e].decimals)),treasuryList[e].lastBalance=o,1==treasuryList[e].isStable&&(totalTreasury=totalTreasury.plus(o)),o.comparedTo(0)>0){var a=3;if(0==treasuryList[e].isStable&&(a=8),$("#treasury_line_"+treasuryList[e].units).length)$("#treasury_line_"+treasuryList[e].units).html(o.dp(a).toString(10)+" "+treasuryList[e].units);else{var s='<div class="right_item" style="width: 100%; color: rgb(40,200,40); text-align: center;" id="treasury_line_'+treasuryList[e].units+'">'+o.dp(a).toString(10)+" "+treasuryList[e].units+"</div>";$("#treasury_contents").append(s),"none"==$("#treasury_view").css("display")&&($("#treasury_placeholder").hide(),$("#treasury_view").show())}}else $("#treasury_line_"+treasuryList[e].units).length&&($("#treasury_line_"+treasuryList[e].units).remove(),0==$("#treasury_contents").children().length&&($("#treasury_view").hide(),$("#treasury_placeholder").show()));e==treasuryList.length-1&&personalizeTreasury()}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}()}function personalizeTreasury(){if(!(circulatingSupply.comparedTo(0)<=0)&&"none"!=$("#treasury_view").css("display")){var t=new BigNumber($("#treasury_amount").val());if(!t.isNaN())if(t.comparedTo(0)>0){if(t.comparedTo(circulatingSupply)>0)return;var e=t.div(circulatingSupply);$("#treasury_title").html("<big>TREASURY CLAIMABLE: "+e.times(100).dp(2).toString(10)+"%</big>");for(var r=0;r<treasuryList.length;r++){var o=3;0==treasuryList[r].isStable&&(o=8),$("#treasury_line_"+treasuryList[r].units).length&&$("#treasury_line_"+treasuryList[r].units).html(treasuryList[r].lastBalance.times(e).dp(o).toString(10)+" "+treasuryList[r].units)}}else{$("#treasury_title").html("<big>TREASURY BALANCE</big>");for(r=0;r<treasuryList.length;r++){o=3;0==treasuryList[r].isStable&&(o=8),$("#treasury_line_"+treasuryList[r].units).length&&$("#treasury_line_"+treasuryList[r].units).html(treasuryList[r].lastBalance.dp(o).toString(10)+" "+treasuryList[r].units)}}}}function refreshPoolData(t){if(0==poolList.length&&loadPoolList(),0==poolRotation)getCirculatingSupply(),TVL=new BigNumber(0),window.setTimeout(function(){refreshPoolData(!0)},6e4);else if(1==t)return void window.setTimeout(function(){refreshPoolData(!0)},6e4);var e=poolList[poolRotation].panel;if("none"==$("#panel_"+e+"_action_buttons").css("display")&&"none"==$("#panel_"+e+"_unlock_button").css("display")||1==$("#panel_"+e+"_unlock_inner_button").prop("disabled")){var r=poolList[poolRotation].poolToken,o=padleftzero(userAddress.substring(2),64),a=padleftzero(operatorAddress.substring(2),64);1==poolList[poolRotation].stbzPool&&(a=padleftzero(stakingAddress.substring(2),64));const t=[{to:r,data:"0x"+contract_viewallowance+o+a},"latest"];ethereum.request({method:"eth_call",params:t}).then(t=>{var r=t.substring(2);new BigNumber("0x"+r.substring(0,64)).comparedTo(1)<0?$("#panel_"+e+"_unlock_button").show():($("#panel_"+e+"_unlock_button").hide(),$("#panel_"+e+"_action_buttons").show())}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}var s,n=poolRotation;if(0==poolList[n].stbzPool){var i=new BigNumber(poolList[poolRotation].poolID).toString(16);i=padleftzero(i,64),s=[{to:operatorAddress,data:"0x"+contract_poolSize+i},"latest"]}else s=[{to:stakingAddress,data:"0x"+contract_staking_poolSize},"latest"];ethereum.request({method:"eth_call",params:s}).then(t=>{var r=t.substring(2),o=new BigNumber("0x"+r.substring(0,64));o=o.div(new BigNumber(10).pow(poolList[n].decimals)),$("#panel_"+e+"_poolsize").html(o.dp(2).toString(10)+" "+poolList[n].units);var a=padleftzero(userAddress.substring(2),64);s=0==poolList[n].stbzPool?[{to:operatorAddress,data:"0x"+contract_poolBalance+i+a},"latest"]:[{to:stakingAddress,data:"0x"+contract_staking_poolBalance+a},"latest"],ethereum.request({method:"eth_call",params:s}).then(t=>{var r=t.substring(2),l=new BigNumber("0x"+r.substring(0,64));l=l.div(new BigNumber(10).pow(poolList[n].decimals)),$("#panel_"+e+"_mybalance").html(l.dp(8).toString(10)+" "+poolList[n].units),l.comparedTo(0)<=0?"none"!=$("#panel_"+e+"_withdraw_button").css("display")&&($("#panel_"+e+"_withdraw_button").hide(),$("#panel_"+e+"_claim_button").hide()):"none"==$("#panel_"+e+"_withdraw_button").css("display")&&($("#panel_"+e+"_withdraw_button").show(),$("#panel_"+e+"_claim_button").show()),1==poolList[n].proxy&&(s=[{to:poolList[n].poolToken,data:"0x"+contract_tokenprice},"latest"],ethereum.request({method:"eth_call",params:s}).then(t=>{var r=t.substring(2),a=new BigNumber("0x"+r.substring(0,64));a=a.div(new BigNumber(10).pow(18));var s=l.times(a);$("#panel_"+e+"_value").html(s.dp(3).toString(10)+" "+poolList[n].underlyingUnits),TVL=TVL.plus(o.times(a)),(n+1>=poolList.length||0==n)&&$("#tvl").html("$"+TVL.toFormat(2))}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})),s=0==poolList[n].stbzPool?[{to:operatorAddress,data:"0x"+contract_rewardEarned+i+a},"latest"]:[{to:stakingAddress,data:"0x"+contract_staking_rewardEarned+a},"latest"],ethereum.request({method:"eth_call",params:s}).then(t=>{var r=t.substring(2),a=new BigNumber("0x"+r.substring(0,64));a=a.div(new BigNumber(10).pow(18)),0==poolList[n].stbzPool?($("#panel_"+e+"_rewardbalance").html(a.dp(4).toString(10)+" STBZ"),s=[{to:operatorAddress,data:"0x"+contract_rewardRate+i},"latest"]):($("#panel_"+e+"_rewardbalance").html(a.dp(8).toString(10)+" WETH"),s=[{to:stakingAddress,data:"0x"+contract_staking_rewardRate},"latest"]),ethereum.request({method:"eth_call",params:s}).then(t=>{var r=t.substring(2),a=new BigNumber("0x"+r.substring(0,64));if("LP"!=poolList[n].units){a=a.div(new BigNumber(10).pow(18)),a=0==poolList[n].stbzPool?a.times(stbzPrice):a.times(ethPrice),o.comparedTo(0)>0&&(0==poolList[n].proxy&&0==poolList[n].stbzPool&&(TVL=TVL.plus(o)),a=0==poolList[n].stbzPool?a.div(o):a.div(o.times(stbzPrice)));var s=a.times(new BigNumber(86400));s=s.times(100),$("#panel_"+e+"_dpy").html(s.dp(2).toString(10)+"%");var i=s.times(365);$("#panel_"+e+"_apr").html(i.dp(2).toString(10)+"%");var l=i.div(100);l=l.div(52).plus(1).pow(52).minus(1).times(100),$("#panel_"+e+"_apy").html(l.dp(2).toString(10)+"%"),1==poolList[n].proxy&&$("#panel_"+e+"_apy").html($("#panel_"+e+"_apy").html()+" + <a href='wrap/' style='color: rgb(40,200,40);'>Interest &#9654;</a>"),n+1>=poolList.length&&$("#tvl").html("$"+TVL.toFormat(2)),++poolRotation>=poolList.length?(getEtherPrice(),poolRotation=0):window.setTimeout(function(){refreshPoolData(!1)},500)}else getLPTokenDPY(n,o,a)}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}function getLPTokenDPY(t,e,r){const o=[{to:poolList[t].poolToken,data:"0x"+contract_getreserves},"latest"];ethereum.request({method:"eth_call",params:o}).then(o=>{var a=o.substring(2),s=new BigNumber("0x"+a.substring(0,64)),n=new BigNumber("0x"+a.substring(64,128));const i=[{to:poolList[t].poolToken,data:"0x"+contract_token0address},"latest"];ethereum.request({method:"eth_call",params:i}).then(o=>{var a=o.substring(2).substring(0,64).toLowerCase(),i=padleftzero(wethAddress.substring(2),64).toLowerCase();const l=[{to:poolList[t].poolToken,data:"0x"+contract_totalsupply},"latest"];ethereum.request({method:"eth_call",params:l}).then(o=>{var l=o.substring(2),c=new BigNumber("0x"+l.substring(0,64));if(!(c.comparedTo(0)<=0||ethPrice.comparedTo(0)<=0)){var u=0;a==i?(s=s.div(new BigNumber(10).pow(18)).times(ethPrice),0==t&&(stbzPrice=s.div(n.div(new BigNumber(10).pow(18))),$("#stbz_price").html("$"+stbzPrice.toFormat(2))),n=new BigNumber(s)):(n=n.div(new BigNumber(10).pow(18)).times(ethPrice),0==t&&(stbzPrice=n.div(s.div(new BigNumber(10).pow(18))),$("#stbz_price").html("$"+stbzPrice.toFormat(2))),s=new BigNumber(n)),u=s.plus(n),c=c.div(new BigNumber(10).pow(18));var d=e.div(c),p=u.times(d);p.comparedTo(0)<=0?p=1:TVL=TVL.plus(p);var g=(r=(r=(r=r.div(new BigNumber(10).pow(18))).times(stbzPrice)).div(p)).times(new BigNumber(86400));g=g.times(100),$("#panel_"+poolList[t].panel+"_dpy").html(g.dp(2).toString(10)+"%");var m=g.times(365);$("#panel_"+poolList[t].panel+"_apr").html(m.dp(2).toString(10)+"%");var h=m.div(100);h=h.div(52).plus(1).pow(52).minus(1).times(100),$("#panel_"+poolList[t].panel+"_apy").html(h.dp(2).toString(10)+"%"),t+1>=poolList.length&&$("#tvl").html("$"+TVL.toFormat(2)),++poolRotation>=poolList.length?(getEtherPrice(),poolRotation=0):window.setTimeout(function(){refreshPoolData(!1)},500)}}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}function unlockToken(t){for(var e=0,r=0;r<poolList.length;r++)if(parseInt(poolList[r].panel)==t){e=r;break}var o=new BigNumber(2).pow(256).minus(1),a=operatorAddress.substring(2);1==poolList[e].stbzPool&&(a=stakingAddress.substring(2)),a=padleftzero(a,64);var s=o.toString(16);s=padleftzero(s,64),sendETHTransaction([{to:poolList[e].poolToken,gas:"0x186A0",from:userAddress,data:"0x"+contract_approve+a+s}],function(){$("#panel_"+t+"_unlock_inner_button").prop("disabled",!0),$("#panel_"+t+"_unlock_inner_button").html("UNLOCKING "+poolList[e].units)})}function unlockTreasury(){var t=new BigNumber(2).pow(256).minus(1),e=treasuryAddress.substring(2);e=padleftzero(e,64);var r=t.toString(16);r=padleftzero(r,64),sendETHTransaction([{to:stbzAddress,gas:"0x186A0",from:userAddress,data:"0x"+contract_approve+e+r}],function(){$("#treasury_unlock_inner_button").prop("disabled",!0),$("#treasury_unlock_inner_button").html("UNLOCKING TREASURY")})}function selectMaxTreasury(){var t=padleftzero(userAddress.substring(2),64);const e=[{to:stbzAddress,data:"0x"+contract_balanceof+t},"latest"];ethereum.request({method:"eth_call",params:e}).then(t=>{var e=t.substring(2),r=new BigNumber("0x"+e.substring(0,64));r=r.div(new BigNumber(10).pow(18)),$("#treasury_amount").val(r.toString(10)),personalizeTreasury()}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}function selectMaxOut(t){for(var e,r=0,o=0;o<poolList.length;o++)if(parseInt(poolList[o].panel)==t){r=o;break}if(0==poolList[r].stbzPool){var a=new BigNumber(poolList[r].poolID).toString(16);a=padleftzero(a,64);var s=padleftzero(userAddress.substring(2),64);e=[{to:operatorAddress,data:"0x"+contract_poolBalance+a+s},"latest"]}else{s=padleftzero(userAddress.substring(2),64);e=[{to:stakingAddress,data:"0x"+contract_staking_poolBalance+s},"latest"]}ethereum.request({method:"eth_call",params:e}).then(e=>{var o=e.substring(2),a=new BigNumber("0x"+o.substring(0,64));a=a.div(new BigNumber(10).pow(poolList[r].decimals)),$("#panel_"+t+"_amount").val(a.toString(10))}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}function selectMaxIn(t){for(var e=0,r=0;r<poolList.length;r++)if(parseInt(poolList[r].panel)==t){e=r;break}var o=padleftzero(userAddress.substring(2),64);const a=[{to:poolList[e].poolToken,data:"0x"+contract_balanceof+o},"latest"];ethereum.request({method:"eth_call",params:a}).then(r=>{var o=r.substring(2),a=new BigNumber("0x"+o.substring(0,64));a=a.div(new BigNumber(10).pow(poolList[e].decimals)),$("#panel_"+t+"_amount").val(a.toString(10))}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))})}function deposit(t){for(var e=0,r=0;r<poolList.length;r++)if(parseInt(poolList[r].panel)==t){e=r;break}var o=new BigNumber($("#panel_"+t+"_amount").val());if(!(o.isNaN()||o.comparedTo(0)<=0)){var a,s=(o=o.times(new BigNumber(10).pow(poolList[e].decimals))).toString(16);if(s=padleftzero(s,64),0==poolList[e].stbzPool){var n=new BigNumber(poolList[e].poolID).toString(16);n=padleftzero(n,64),a=[{to:operatorAddress,gas:"0x493E0",from:userAddress,data:"0x"+contract_deposit+n+s}]}else a=[{to:stakingAddress,gas:"0x493E0",from:userAddress,data:"0x"+contract_staking_deposit+s}];sendETHTransaction(a,null)}}function withdraw(t){for(var e=0,r=0;r<poolList.length;r++)if(parseInt(poolList[r].panel)==t){e=r;break}var o=new BigNumber($("#panel_"+t+"_amount").val());if(!(o.isNaN()||o.comparedTo(0)<=0)){var a,s=(o=o.times(new BigNumber(10).pow(poolList[e].decimals))).toString(16);if(s=padleftzero(s,64),0==poolList[e].stbzPool){var n=new BigNumber(poolList[e].poolID).toString(16);n=padleftzero(n,64),a=[{to:operatorAddress,gas:"0x493E0",from:userAddress,data:"0x"+contract_exit+n+s}]}else a=[{to:stakingAddress,gas:"0x493E0",from:userAddress,data:"0x"+contract_staking_exit+s}];sendETHTransaction(a,null)}}function claimTreasury(){var t=new BigNumber($("#treasury_amount").val());if(t.isNaN())return;if(t.comparedTo(0)<=0)return;if(t.comparedTo(circulatingSupply)>0)return;var e=t.div(circulatingSupply);if(t.times(stbzPrice).comparedTo(totalTreasury.times(e))>0&&0==confirm("This burn is likely not economic, do you want to continue?"))return;var r=(t=t.times(new BigNumber(10).pow(18))).toString(16);r=padleftzero(r,64),sendETHTransaction([{to:treasuryAddress,gas:"0x927C0",from:userAddress,data:"0x"+contract_claimTreasury+r}],null)}function claimReward(t){for(var e=0,r=0;r<poolList.length;r++)if(parseInt(poolList[r].panel)==t){e=r;break}var o=new BigNumber(poolList[e].poolID).toString(16);o=padleftzero(o,64),sendETHTransaction(0==poolList[e].stbzPool?[{to:operatorAddress,gas:"0x30D40",from:userAddress,data:"0x"+contract_claimReward+o}]:[{to:stakingAddress,gas:"0x30D40",from:userAddress,data:"0x"+contract_staking_claimReward}],null)}function sendETHTransaction(t,e){0==new BigNumber("0x"+ethereum.chainId.substring(2)).comparedTo(targetNetwork)?ethereum.request({method:"eth_sendTransaction",params:t}).then(t=>{console.log("Transaction hash: "+t),e&&e()}).catch(t=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(t))}):alert("This application requires the main network, please switch it in your MetaMask UI.")}function setCookie(t,e,r){var o="";if(r>0){var a=new Date;a.setTime(a.getTime()+24*r*60*60*1e3),o="; expires="+a.toUTCString()}document.cookie=t+"="+(e||"")+o+"; path=/; SameSite=Strict"}function getCookie(t){for(var e=t+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var a=r[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return null}function eraseCookie(t){document.cookie=t+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}$(window).on("load",function(){checkMetaMaskExist()});