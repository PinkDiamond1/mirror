var detectMetamask=!1,metamaskConnected=!1,userAddress="",refreshTimer=null,priceQuoteTimer=null,sendAmountTimer=null,searchTokenTimer=null,allowanceTimer=null,tokenList=[],tokenDirection=0,wethAddress="0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",ethAddress="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",routerAddress="0x90d60BE875b526de78dD5E2Db3A5bfA34F6a6649",claimStakerAddress="0x1775e656eBEA1Df63a0999f9EBF78fbd5EBc17e4",reethFee=new BigNumber(.003),sendTokenAddress=ethAddress.toUpperCase(),receiveTokenAddress="",maxSlippage=new BigNumber(.5),deadlineTime=new BigNumber(20),swapData={sendAmount:0,feeAmount:0,priceRoute:null,sendDecimals:0,receiveDecimals:0,minReceiveAmount:0},targetNetwork=1,contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_totalsupply="18160ddd",contract_balanceof="70a08231",contract_decimals="313ce567",contract_token_name="06fdde03",contract_token_symbol="95d89b41",contract_weth_deposit="d0e30db0",contract_weth_withdraw="2e1a7d4d",contract_query_fee="761f10c5",contract_swap_tokens="556fbe85",contract_getuserethspent="f5271146";function loadInitialTokens(){tokenList.push({address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",symbol:"ETH",descript:"ETHEREUM",safe:!0,hidden:!1}),tokenList.push({address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",symbol:"WETH",descript:"WRAPPED ETHEREUM",safe:!0,hidden:!1}),tokenList.push({address:"0xe804964c296E9FB666fBE67767838c1FF9Ab3209",symbol:"REETH",descript:"REETH TOKEN",safe:!0,hidden:!1}),tokenList.push({address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",symbol:"USDC",descript:"USD COIN",safe:!0,hidden:!1}),tokenList.push({address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",symbol:"USDT",descript:"TETHER COIN",safe:!0,hidden:!1}),tokenList.push({address:"0x6B175474E89094C44Da98b954EedeAC495271d0F",symbol:"DAI",descript:"MAKERDAO DAI",safe:!0,hidden:!1}),tokenList.push({address:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",symbol:"WBTC",descript:"WRAPPED BITCOIN",safe:!0,hidden:!1}),tokenList.push({address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",descript:"UNISWAP COIN",safe:!0,hidden:!1}),tokenList.push({address:"0x514910771AF9Ca656af840dff83E8264EcF986CA",symbol:"LINK",descript:"CHAINLINK",safe:!0,hidden:!1}),tokenList.push({address:"0x8E870D67F660D95d5be530380D0eC0bd388289E1",symbol:"PAX",descript:"PAXOS STANDARD",safe:!0,hidden:!1}),tokenList.push({address:"0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2",symbol:"MKR",descript:"MAKERDAO TOKEN",safe:!0,hidden:!1}),tokenList.push({address:"0xa47c8bf37f92aBed4A126BDA807A7b7498661acD",symbol:"UST",descript:"LUNA UST",safe:!0,hidden:!1}),tokenList.push({address:"0x853d955aCEf822Db058eb8505911ED77F175b99e",symbol:"FRAX",descript:"FRAX",safe:!0,hidden:!1}),tokenList.push({address:"0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9",symbol:"AAVE",descript:"AAVE TOKEN",safe:!0,hidden:!1}),tokenList.push({address:"0xEB4C2781e4ebA804CE9a9803C67d0893436bB27D",symbol:"RENBTC",descript:"RENBTC",safe:!0,hidden:!1})}function checkMetaMaskExist(){void 0!==window.ethereum&&(detectMetamask=!0,null==getCookie("metamask")?$("#metamask_interactive").html("Connect Wallet"):0==metamaskConnected&&enableMetaMask())}$(window).on("load",function(){checkMetaMaskExist()});async function enableMetaMask(){var e=await ethereum.request({method:"eth_requestAccounts"});if(e){var t=await ethereum.request({method:"eth_chainId"});if(0!=(t=new BigNumber("0x"+t.substring(2))).comparedTo(targetNetwork))return 0==t.comparedTo(56)?void window.location.replace("../../"):0==t.comparedTo(42161)?(userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),$("#connection_text").html("Switch network from Arbitrum One network to Ethereum network"),void ethereum.on("chainChanged",function(e){location.reload()})):void alert("This application requires the mainnet network, please switch it in your MetaMask UI.");userAddress=e[0],metamaskConnected=!0,setCookie("metamask","active",0),$("#loading_panel").hide(),$("#data_panel").show(),$("#max_slippage_inner").html(maxSlippage.dp(2).toString(10)),updateUI(),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(e){userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(e){location.reload()})}}function metamaskButtonClick(){0==detectMetamask?window.open("https://metamask.io/","_blank"):1==detectMetamask&&0==metamaskConnected&&enableMetaMask()}function padleftzero(e,t){return(e=e.toString()).length<t?padleftzero("0"+e,t):e}function padrightzero(e,t){return(e=e.toString()).length<t?padrightzero(e+"0",t):e}function openOptionsModal(){$("#modal_options_slippage").val(maxSlippage.dp(2).toString(10)),$("#modal_options_deadline").val(deadlineTime),$("#optionsModal").modal({})}function saveAndCloseOptionsModal(){maxSlippage=new BigNumber($("#modal_options_slippage").val()),deadlineTime=new BigNumber($("#modal_options_deadline").val()),$("#max_slippage_inner").html(maxSlippage.dp(2).toString(10)),$("#optionsModal").modal("hide")}function openTokenSearch(e){tokenDirection=e,0==tokenList.length&&(loadInitialTokens(),populateInitialTokens()),$("#token_search_box").val("");for(var t=0;t<tokenList.length;t++){var n="#modal_token_"+tokenList[t].address;1==tokenList[t].hidden&&($(n).show(),tokenList[t].hidden=!1),$("#modal_token_"+tokenList[t].address+"_balance").html("-")}$("#tokenModal").modal({}),populateTokenBalances()}function populateInitialTokens(){for(var e=0;e<tokenList.length;e++)addTokenToList(e)}function addTokenToList(e){var t=tokenList[e].symbol,n=tokenList[e].descript,o=tokenList[e].address,s=tokenList[e].address.substring(0,9)+"..."+tokenList[e].address.substring(33);tokenList[e].address.toUpperCase()==ethAddress.toUpperCase()&&(s="");var a="";0==tokenList[e].safe&&(a="color: red;"),$("#token_list").append('<div id="modal_token_'+o+'" class="token_list_row" onclick="selectToken(this);"><div class="token_list_left_item"><span style="font-size: 20px; font-weight: bold; '+a+'">'+t+"</span><br>"+n+"<br>"+s+'</div><div class="token_list_right_item"><span id="modal_token_'+o+'_balance">-</span></div></div>')}function selectToken(e){var t=$(e).attr("id");t=(t=t.substring(12)).toUpperCase();for(var n=-1,o=0;o<tokenList.length;o++)if(t==tokenList[o].address.toUpperCase()){n=o;break}if($("#tokenModal").modal("hide"),-1!=n){e=tokenList[n].address.toUpperCase();if(0==tokenDirection){if(receiveTokenAddress==e)return void inverseTokens();sendTokenAddress=e,$("#send_token_symbol").html(tokenList[n].symbol)}else{if(sendTokenAddress==e)return void inverseTokens();""==receiveTokenAddress&&$("#swap_action_button").html("SELECT SWAP AMOUNT"),receiveTokenAddress=e,$("#receive_token_symbol").html(tokenList[n].symbol)}resetAmountCalculation(),updateUI()}}function resetTokenSearch(){null!=searchTokenTimer&&clearTimeout(searchTokenTimer),searchTokenTimer=window.setTimeout(checkTokenSearch,250)}async function checkTokenSearch(){if((n=$("#token_search_box").val()).length<3)for(var e=0;e<tokenList.length;e++)1==tokenList[e].hidden&&(o="#modal_token_"+tokenList[e].address,$(o).show(),tokenList[e].hidden=!1);else{for(var t=!1,n=n.toLowerCase(),e=0;e<tokenList.length;e++){var o,s=tokenList[e].address.toLowerCase(),a=tokenList[e].descript.toLowerCase(),r=tokenList[e].symbol.toLowerCase();s.indexOf(n)<0&&a.indexOf(n)<0&&r.indexOf(n)<0?(o="#modal_token_"+tokenList[e].address,$(o).hide(),tokenList[e].hidden=!0):(o="#modal_token_"+tokenList[e].address,"none"==$(o).css("display")&&$(o).show(),t=!(tokenList[e].hidden=!1))}0==t&&42==n.length&&"0x"==n.substring(0,2).toLowerCase()&&await importNewToken(n),populateTokenBalances()}}async function populateTokenBalances(){for(var e,t=0,n=0;n<tokenList.length;n++)if(0==tokenList[n].hidden&&("-"==$("#modal_token_"+tokenList[n].address+"_balance").html()&&(e=await getTokenBalance(tokenList[n].address),$("#modal_token_"+tokenList[n].address+"_balance").html(e.dp(8).toString(10))),t++),4<t)break}async function importNewToken(e){var n,o="",t=[{to:e.toLowerCase(),data:"0x"+contract_token_name},"latest"];await ethereum.request({method:"eth_call",params:t}).then(e=>{var t=e.substring(2);0!=t.length&&(e=new BigNumber("0x"+t.substring(64,128)),e=hex2ascii(e=t.substring(128,128+2*parseInt(e.toString(10)))),o=e.toUpperCase())}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),0!=o.length&&(n="",t=[{to:e.toLowerCase(),data:"0x"+contract_token_symbol},"latest"],await ethereum.request({method:"eth_call",params:t}).then(e=>{var t=e.substring(2);0!=t.length&&(e=new BigNumber("0x"+t.substring(64,128)),e=hex2ascii(e=t.substring(128,128+2*parseInt(e.toString(10)))),n=e.toUpperCase())}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),0!=n.length&&(tokenList.push({address:e,symbol:n,descript:o+" (IMPORTED)",safe:!1,hidden:!1}),addTokenToList(tokenList.length-1)))}function hex2ascii(e){for(var t=e.toString(),n="",o=0;o<t.length;o+=2)n+=String.fromCharCode(parseInt(t.substr(o,2),16));return n}function inverseTokens(){if(""!=receiveTokenAddress){var e=receiveTokenAddress,t=$("#receive_amount").val();receiveTokenAddress=sendTokenAddress,$("#receive_amount").val($("#send_amount").val()),sendTokenAddress=e,$("#send_amount").val(t);for(var n=0;n<tokenList.length;n++){var o=tokenList[n].address.toUpperCase();o==sendTokenAddress&&$("#send_token_symbol").html(tokenList[n].symbol),o==receiveTokenAddress&&$("#receive_token_symbol").html(tokenList[n].symbol)}resetAmountCalculation(),checkActiveBalances()}}function resetAmountCalculation(){null!=sendAmountTimer&&clearTimeout(sendAmountTimer),$("#swap_action_button").css("opacity","0.7"),$("#swap_action_button").prop("disabled",!0),""==receiveTokenAddress?$("#swap_action_button").html("SELECT TOKENS"):$("#swap_action_button").html("SELECT SWAP AMOUNT"),sendAmountTimer=window.setTimeout(checkSendAmount,1e3)}async function checkSendAmount(){var e=$("#swap_action_button").html();"MAKING SWAP..."!=e&&"UNLOCKING TOKEN"!=e&&(e=new BigNumber($("#send_amount").val()),$("#receive_amount").html(""),e.isNaN()||(0!=e.comparedTo(0)?""!=receiveTokenAddress&&($("#swap_action_button").html("SELECT SWAP AMOUNT"),$("#swap_action_button").css("opacity","0.7"),$("#swap_action_button").prop("disabled",!0),receiveTokenAddress==wethAddress.toUpperCase()&&sendTokenAddress==ethAddress.toUpperCase()?($("#receive_amount").val(e.toString(10)),$("#swap_action_button").html("WRAP ETH"),$("#swap_action_button").css("opacity","1"),$("#swap_action_button").prop("disabled",!1)):receiveTokenAddress==ethAddress.toUpperCase()&&sendTokenAddress==wethAddress.toUpperCase()?($("#receive_amount").val(e.toString(10)),$("#swap_action_button").html("UNWRAP ETH"),$("#swap_action_button").css("opacity","1"),$("#swap_action_button").prop("disabled",!1)):($("#swap_action_button").html("CALCULATING ROUTE"),await queryParaswap(sendTokenAddress,receiveTokenAddress,e))):$("#receive_amount").val(e.toString(10))))}async function queryParaswap(e,t,n){var o,s,a,r="https://apiv4.paraswap.io/v2/prices";0!=(n=await convertFromDecimalFormat(e,n)).comparedTo(-1)&&(0==(o=await getTokenDecimals(t)).comparedTo(-1)||0!=(s=await getTokenDecimals(e)).comparedTo(-1)&&(swapData.sendAmount=n,swapData.receiveDecimals=o,swapData.sendDecimals=s,r="https://apiv4.paraswap.io/v2/prices"+("?excludeContractMethods=swapOnUniswap%2CswapOnUniswapFork%2CbuyOnUniswap%2CbuyOnUniswapFork&from="+e.toLowerCase()+"&fromDecimals="+s.toString(10)+"&to="+t.toLowerCase()+"&toDecimals="+o.toString(10)+"&amount="+n.toString(10)+"&side=SELL&network=1"),a=new BigNumber(0),await $.ajax({url:r,headers:{"X-Partner":"stabilize"},method:"GET"}).then(e=>{a=new BigNumber(e.priceRoute.destAmount),swapData.minReceiveAmount=a.minus(a.times(maxSlippage.div(100))).dp(0),a=(a=a.minus(a.times(reethFee)).dp(0)).div(new BigNumber(10).pow(o)),$("#receive_amount").val(a.dp(8).toString(10)),swapData.priceRoute=e.priceRoute}).fail((e,t,n)=>{console.log("Failed to find trade route"),$("#swap_action_button").html("NO ROUTE FOUND")}),0<a.comparedTo(0)&&(0==await checkSendTokenAllowance()?$("#swap_action_button").html("UNLOCK TOKEN"):$("#swap_action_button").html("SWAP TOKENS"),$("#swap_action_button").css("opacity","1"),$("#swap_action_button").prop("disabled",!1),null!=priceQuoteTimer&&clearTimeout(priceQuoteTimer),priceQuoteTimer=window.setTimeout(checkSendAmount,6e4))))}async function convertToDecimalFormat(e,t){e=await getTokenDecimals(e);return 0==e.comparedTo(-1)?new BigNumber(-1):t=t.div(new BigNumber(10).pow(e))}async function convertFromDecimalFormat(e,t){e=await getTokenDecimals(e);return 0==e.comparedTo(-1)?new BigNumber(-1):t=t.times(new BigNumber(10).pow(e)).dp(0)}async function getTokenDecimals(e){if(e.toUpperCase()==ethAddress.toUpperCase())return new BigNumber(18);var e=[{to:e.toLowerCase(),data:"0x"+contract_decimals},"latest"],t=new BigNumber(0);return await ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2);t=new BigNumber("0x"+e.substring(0,64))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e)),t=new BigNumber(-1)}),t}async function getTokenBalance(e){var t=18,n=new BigNumber(0);if(e.toUpperCase()!=ethAddress.toUpperCase()){if(0==(t=await getTokenDecimals(e)).comparedTo(-1))return new BigNumber(0);var o=padleftzero(userAddress.substring(2),64),o=[{to:e.toLowerCase(),data:"0x"+contract_balanceof+o},"latest"];await ethereum.request({method:"eth_call",params:o}).then(e=>{e=e.substring(2);n=new BigNumber("0x"+e.substring(0,64))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}else await ethereum.request({method:"eth_getBalance",params:[userAddress,"latest"]}).then(e=>{e=e.substring(2);n=new BigNumber("0x"+e.substring(0,64))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))});return 0<n.comparedTo(0)&&(n=n.div(new BigNumber(10).pow(t))),n}async function checkActiveBalances(){var e;""!=sendTokenAddress&&(e=await getTokenBalance(sendTokenAddress),$("#send_balance").html(e.dp(8).toString(10))),""!=receiveTokenAddress&&(e=await getTokenBalance(receiveTokenAddress),$("#receive_balance").html(e.dp(8).toString(10)))}async function updateUI(){null!=refreshTimer&&clearTimeout(refreshTimer);var e=padleftzero(userAddress.substring(2),64),t=new BigNumber(0),e=[{to:claimStakerAddress,data:"0x"+contract_getuserethspent+e},"latest"];await ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2);t=(t=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),checkActiveBalances();e=8;0<t.comparedTo(1)&&(e=2),$("#eth_spent").html(t.dp(e).toString(10)+" ETH"),refreshTimer=window.setTimeout(updateUI,15e3)}async function selectMaxSend(){var e=await getTokenBalance(sendTokenAddress);$("#send_amount").val(e),resetAmountCalculation()}async function makeAction(){var e,t=await getTokenBalance(sendTokenAddress),n=new BigNumber($("#send_amount").val()),o=$("#swap_action_button").html();"WRAP ETH"==o?0<n.comparedTo(t)?alert("Cannot send more than your balance"):(e=(n=n.times(new BigNumber(10).pow(18))).toString(16),sendETHTransaction([{to:wethAddress.toLowerCase(),value:e,from:userAddress.toLowerCase(),data:"0x"+contract_weth_deposit}],null)):"UNWRAP ETH"==o?0<n.comparedTo(t)?alert("Cannot send more than your balance"):(e=padleftzero(e=(n=n.times(new BigNumber(10).pow(18))).toString(16),64),sendETHTransaction([{to:wethAddress.toLowerCase(),from:userAddress.toLowerCase(),data:"0x"+contract_weth_withdraw+e}],null)):"UNLOCK TOKEN"==o?unlockSendToken():"SWAP TOKENS"==o&&(0<n.comparedTo(t)?alert("Cannot send more than your balance"):swapTokens())}async function checkSendTokenAllowance(){if(""!=sendTokenAddress){if(sendTokenAddress==ethAddress.toUpperCase())return!0;var e=padleftzero(userAddress.substring(2),64),t=padleftzero(routerAddress.substring(2),64),t=[{to:sendTokenAddress.toLowerCase(),data:"0x"+contract_viewallowance+e+t},"latest"],n=new BigNumber(0);return await ethereum.request({method:"eth_call",params:t}).then(e=>{e=e.substring(2);n=new BigNumber("0x"+e.substring(0,64))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),!(n.comparedTo(1)<0)}}async function checkAllowanceContinued(){1==await checkSendTokenAllowance()&&($("#swap_action_button").html("SWAP TOKENS"),$("#swap_action_button").css("opacity","1"),$("#swap_action_button").prop("disabled",!1)),"UNLOCKING TOKEN"==$("#swap_action_button").html()&&(allowanceTimer=window.setTimeout(checkAllowanceContinued,15e3))}function unlockSendToken(){var e=new BigNumber(2).pow(256).minus(1),t=padleftzero((t=routerAddress.substring(2)).toLowerCase(),64),e=padleftzero(e=e.toString(16),64);sendETHTransaction([{to:sendTokenAddress.toLowerCase(),from:userAddress.toLowerCase(),data:"0x"+contract_approve+t+e}],function(){$("#swap_action_button").prop("disabled",!0),$("#swap_action_button").css("opacity","0.7"),$("#swap_action_button").html("UNLOCKING TOKEN"),allowanceTimer=window.setTimeout(checkAllowanceContinued,15e3)})}async function swapTokens(){$("#swap_action_button").css("opacity","0.7"),$("#swap_action_button").prop("disabled",!0),$("#swap_action_button").html("MAKING SWAP...");var e="https://apiv4.paraswap.io/v2/transactions/1?useReduxToken=false&onlyParams=false&skipChecks=true",t={receiver:userAddress,srcToken:sendTokenAddress.toLowerCase(),fromDecimals:parseInt(swapData.sendDecimals.toString(10)),destToken:receiveTokenAddress.toLowerCase(),toDecimals:parseInt(swapData.receiveDecimals.toString(10)),referrer:"stabilize",userAddress:userAddress.toLowerCase(),priceRoute:swapData.priceRoute,srcAmount:swapData.sendAmount.dp(0).toString(10),destAmount:swapData.minReceiveAmount.dp(0).toString(10)},n=null;if(await $.ajax({url:e,headers:{"X-Partner":"stabilize"},method:"POST",contentType:"application/json",data:JSON.stringify(t)}).then(e=>{n=e}).fail((e,t,n)=>{console.log("Failed to create swap transaction data")}),null!=n)if(n.data){var o=new BigNumber(0);sendTokenAddress==ethAddress.toUpperCase()&&(o=swapData.sendAmount.dp(0));var s=padleftzero(sendTokenAddress.toLowerCase().substring(2),64),a=padleftzero(receiveTokenAddress.toLowerCase().substring(2),64),r=padleftzero(swapData.sendAmount.dp(0).toString(16),64),i=formatToPositionHex(4,""),d=formatToEthereumBytes(n.data),c=new BigNumber(2e6),l=[{to:routerAddress.toLowerCase(),from:userAddress,gas:"0x"+c.toString(16),value:"0x"+o.toString(16),data:"0x"+contract_query_fee+s+a+r+i+d},"latest"],u=new BigNumber(0),m=new BigNumber(0);if(await ethereum.request({method:"eth_call",params:l}).then(e=>{e=e.substring(2);u=new BigNumber("0x"+e.substring(0,64)),m=new BigNumber("0x"+e.substring(64,128))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),0==u.comparedTo(0))return console.log("Failed to get fee data"),void $("#swap_action_button").html("TOO MUCH SLIPPAGE");u=u.times(.999).dp(0);var p=null;if(receiveTokenAddress!=ethAddress.toUpperCase()&&receiveTokenAddress!=wethAddress.toUpperCase()){var h="https://apiv4.paraswap.io/v2/prices"+("?from="+receiveTokenAddress.toLowerCase()+"&fromDecimals="+swapData.receiveDecimals.toString(10)+"&to="+wethAddress.toLowerCase()+"&toDecimals=18&amount="+u.toString(10)+"&side=SELL&network=1"),w=null;if(await $.ajax({url:h,method:"GET"}).then(e=>{w=e.priceRoute}).fail((e,t,n)=>{console.log("Failed to find trade route")}),null==w)return console.log("Failed to find fee route"),void $("#swap_action_button").html("INTERNAL ERROR (3)");if(t={receiver:routerAddress,srcToken:receiveTokenAddress.toLowerCase(),fromDecimals:parseInt(swapData.receiveDecimals.toString(10)),destToken:wethAddress.toLowerCase(),toDecimals:18,referrer:"none",userAddress:userAddress.toLowerCase(),priceRoute:w,srcAmount:u.dp(0).toString(10),destAmount:new BigNumber(1).toString(10)},await $.ajax({url:e,method:"POST",contentType:"application/json",data:JSON.stringify(t)}).then(e=>{p=e.data}).fail((e,t,n)=>{console.log("Failed to create fee transaction data")}),null==p)return void $("#swap_action_button").html("INTERNAL ERROR (4)")}else p="0x";var k=m.plus(deadlineTime.times(60)),h=padleftzero(u.dp(0).toString(16),64),e=padleftzero(k.toString(16),64),i=formatToPositionHex(7,""),t=formatToPositionHex(7,d),k=formatToEthereumBytes(p),k=contract_swap_tokens+s+a+r+h+e+i+t+d+k,l=[{to:routerAddress.toLowerCase(),from:userAddress,gas:"0x"+c.toString(16),value:"0x"+o.toString(16),data:"0x"+k},"latest"],g=new BigNumber(0);await ethereum.request({method:"eth_estimateGas",params:l}).then(e=>{e=e.substring(2);g=new BigNumber("0x"+e.substring(0,64))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),0!=g.comparedTo(0)?(k=[{to:routerAddress.toLowerCase(),value:"0x"+o.toString(16),from:userAddress,data:"0x"+k}],$("#swap_action_button").html("SWAP TOKENS"),$("#swap_action_button").css("opacity","1"),$("#swap_action_button").prop("disabled",!1),sendETHTransaction(k,function(){$("#swap_action_button").css("opacity","0.7"),$("#swap_action_button").prop("disabled",!0),$("#swap_action_button").html("SELECT SWAP AMOUNT"),$("#send_amount").val(""),$("#receive_amount").val("")})):$("#swap_action_button").html("INTERNAL ERROR (5)")}else $("#swap_action_button").html("INTERNAL ERROR (1)");else $("#swap_action_button").html("INTERNAL ERROR (1)")}function formatToEthereumBytes(e){return e=e.substring(2),padleftzero(new BigNumber(e.length).div(2).toString(16),64)+(e=e.length<64?padrightzero(e,64):padrightzero(e,64*parseInt(new BigNumber(e.length).div(64).integerValue(BigNumber.ROUND_CEIL).toString(10))))}function formatToPositionHex(e,t){return padleftzero(new BigNumber(64*e+t.length).div(2).toString(16),64)}async function sendETHTransaction(e,t){var n=await ethereum.request({method:"eth_chainId"});0==(n=new BigNumber("0x"+n.substring(2))).comparedTo(targetNetwork)?ethereum.request({method:"eth_sendTransaction",params:e}).then(e=>{console.log("Transaction hash: "+e),t&&t()}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}):alert("This application requires the main network, please switch it in your MetaMask UI.")}function setCookie(e,t,n){var o,s="";0<n&&((o=new Date).setTime(o.getTime()+24*n*60*60*1e3),s="; expires="+o.toUTCString()),document.cookie=e+"="+(t||"")+s+"; path=/; SameSite=Strict"}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var s=n[o];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null}function eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}